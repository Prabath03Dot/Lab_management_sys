{"ast":null,"code":"import React, { forwardRef, useState, useRef, cloneElement } from 'react';\nimport { useUuid, useUncontrolled, useWindowEvent, useClickOutside, useMergedRef } from '@mantine/hooks';\nimport { getDefaultZIndex } from '@mantine/styles';\nimport { MenuIcon } from './MenuIcon.js';\nimport { MenuItem } from './MenuItem/MenuItem.js';\nimport { MenuLabel } from './MenuLabel/MenuLabel.js';\nimport useStyles from './Menu.styles.js';\nimport { filterChildrenByType } from '../../utils/filter-children-by-type/filter-children-by-type.js';\nimport { Divider } from '../Divider/Divider.js';\nimport { Text } from '../Text/Text.js';\nimport { Box } from '../Box/Box.js';\nimport { Popper } from '../Popper/Popper.js';\nimport { Paper } from '../Paper/Paper.js';\nimport { ActionIcon } from '../ActionIcon/ActionIcon.js';\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\n\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\n\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n\n  if (__getOwnPropSymbols) for (var prop of __getOwnPropSymbols(b)) {\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\n\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\n\nvar __objRest = (source, exclude) => {\n  var target = {};\n\n  for (var prop in source) if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0) target[prop] = source[prop];\n\n  if (source != null && __getOwnPropSymbols) for (var prop of __getOwnPropSymbols(source)) {\n    if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop)) target[prop] = source[prop];\n  }\n  return target;\n};\n\nconst defaultControl = /* @__PURE__ */React.createElement(ActionIcon, null, /* @__PURE__ */React.createElement(MenuIcon, null));\n\nfunction getNextItem(active, items) {\n  for (let i = active + 1; i < items.length; i += 1) {\n    if (!items[i].props.disabled && items[i].type === MenuItem) {\n      return i;\n    }\n  }\n\n  return active;\n}\n\nfunction findInitialItem(items) {\n  for (let i = 0; i < items.length; i += 1) {\n    if (!items[i].props.disabled && items[i].type === MenuItem) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\nfunction getPreviousItem(active, items) {\n  for (let i = active - 1; i >= 0; i -= 1) {\n    if (!items[i].props.disabled && items[i].type === MenuItem) {\n      return i;\n    }\n  }\n\n  if (!items[active] || items[active].type !== MenuItem) {\n    return findInitialItem(items);\n  }\n\n  return active;\n}\n\nconst Menu = forwardRef((_a, ref) => {\n  var _b = _a,\n      {\n    control = defaultControl,\n    children,\n    onClose,\n    onOpen,\n    opened,\n    menuId,\n    closeOnItemClick = true,\n    transitionDuration = 250,\n    size = \"md\",\n    shadow = \"md\",\n    position = \"bottom\",\n    placement = \"start\",\n    gutter = 5,\n    withArrow = false,\n    transition = \"pop-top-left\",\n    transitionTimingFunction,\n    menuButtonLabel,\n    controlRefProp = \"ref\",\n    trigger = \"click\",\n    radius = \"sm\",\n    delay = 100,\n    zIndex = getDefaultZIndex(\"popover\"),\n    withinPortal = true,\n    trapFocus = true,\n    classNames,\n    styles,\n    closeOnScroll = false,\n    onMouseLeave,\n    onMouseEnter,\n    onChange,\n    className,\n    sx,\n    clickOutsideEvents = [\"click\", \"touchstart\"]\n  } = _b,\n      others = __objRest(_b, [\"control\", \"children\", \"onClose\", \"onOpen\", \"opened\", \"menuId\", \"closeOnItemClick\", \"transitionDuration\", \"size\", \"shadow\", \"position\", \"placement\", \"gutter\", \"withArrow\", \"transition\", \"transitionTimingFunction\", \"menuButtonLabel\", \"controlRefProp\", \"trigger\", \"radius\", \"delay\", \"zIndex\", \"withinPortal\", \"trapFocus\", \"classNames\", \"styles\", \"closeOnScroll\", \"onMouseLeave\", \"onMouseEnter\", \"onChange\", \"className\", \"sx\", \"clickOutsideEvents\"]);\n\n  const [hovered, setHovered] = useState(-1);\n  const buttonsRefs = useRef({});\n  const {\n    classes,\n    cx,\n    theme\n  } = useStyles({\n    size\n  }, {\n    classNames,\n    styles,\n    name: \"Menu\"\n  });\n  const delayTimeout = useRef();\n  const [referenceElement, setReferenceElement] = useState(null);\n  const [wrapperElement, setWrapperElement] = useState(null);\n  const [dropdownElement, setDropdownElement] = useState(null);\n  const items = filterChildrenByType(children, [MenuItem, MenuLabel, Divider]);\n  const uuid = useUuid(menuId);\n\n  const focusReference = () => window.setTimeout(() => referenceElement == null ? void 0 : referenceElement.focus(), 0);\n\n  const [_opened, setOpened] = useUncontrolled({\n    value: opened,\n    defaultValue: false,\n    finalValue: false,\n    rule: val => typeof val === \"boolean\",\n    onChange: value => value ? typeof onOpen === \"function\" && onOpen() : typeof onClose === \"function\" && onClose()\n  });\n  const openedRef = useRef(_opened);\n\n  const handleClose = () => {\n    if (openedRef.current) {\n      openedRef.current = false;\n      setOpened(false);\n    }\n  };\n\n  const handleOpen = () => {\n    openedRef.current = true;\n    setOpened(true);\n  };\n\n  useWindowEvent(\"scroll\", () => closeOnScroll && handleClose());\n  useClickOutside(() => _opened && handleClose(), clickOutsideEvents, [dropdownElement, wrapperElement]);\n\n  const toggleMenu = () => {\n    _opened ? handleClose() : handleOpen();\n  };\n\n  const controlEventHandlers = trigger === \"click\" ? {\n    onClick: toggleMenu\n  } : {\n    onMouseEnter: handleOpen,\n    onClick: toggleMenu\n  };\n\n  const handleMouseLeave = event => {\n    typeof onMouseLeave === \"function\" && onMouseLeave(event);\n\n    if (trigger === \"hover\") {\n      if (delay > 0) {\n        delayTimeout.current = window.setTimeout(() => handleClose(), delay);\n      } else {\n        handleClose();\n      }\n    }\n  };\n\n  const handleMouseEnter = event => {\n    typeof onMouseEnter === \"function\" && onMouseEnter(event);\n    window.clearTimeout(delayTimeout.current);\n  };\n\n  const handleKeyDown = event => {\n    if (_opened) {\n      if (event.nativeEvent.code === \"Tab\" && trapFocus) {\n        event.preventDefault();\n      }\n\n      if (event.nativeEvent.code === \"ArrowDown\") {\n        event.preventDefault();\n        const prevIndex = getNextItem(hovered, items);\n        setHovered(prevIndex);\n        buttonsRefs.current[prevIndex].focus();\n      }\n\n      if (event.nativeEvent.code === \"ArrowUp\") {\n        event.preventDefault();\n        const prevIndex = getPreviousItem(hovered, items);\n        setHovered(prevIndex);\n        buttonsRefs.current[prevIndex].focus();\n      }\n\n      if (event.nativeEvent.code === \"Escape\") {\n        handleClose();\n        focusReference();\n      }\n    }\n  };\n\n  const menuControl = cloneElement(control, __spreadProps(__spreadValues({}, controlEventHandlers), {\n    onClick: event => {\n      controlEventHandlers.onClick();\n      typeof control.props.onClick === \"function\" && control.props.onClick(event);\n    },\n    role: \"button\",\n    \"aria-haspopup\": \"menu\",\n    \"aria-expanded\": _opened,\n    \"aria-controls\": uuid,\n    \"aria-label\": menuButtonLabel,\n    title: menuButtonLabel,\n    [controlRefProp]: useMergedRef(setReferenceElement, ref),\n    onKeyDown: handleKeyDown\n  }));\n  const content = items.map((item, index) => {\n    if (item.type === MenuItem) {\n      return /* @__PURE__ */React.createElement(MenuItem, __spreadProps(__spreadValues({}, item.props), {\n        key: index,\n        hovered: hovered === index,\n        onHover: () => setHovered(index),\n        radius,\n        onMouseLeave: () => setHovered(-1),\n        onKeyDown: handleKeyDown,\n        styles,\n        classNames,\n        onClick: event => {\n          if (closeOnItemClick) {\n            handleClose();\n            trigger === \"click\" && focusReference();\n          }\n\n          if (typeof item.props.onClick === \"function\") {\n            item.props.onClick(event);\n          }\n        },\n        ref: node => {\n          buttonsRefs.current[index] = node;\n        }\n      }));\n    }\n\n    if (item.type === MenuLabel) {\n      return /* @__PURE__ */React.createElement(Text, __spreadValues({\n        key: index,\n        className: classes.label\n      }, item.props));\n    }\n\n    if (item.type === Divider) {\n      return /* @__PURE__ */React.createElement(Divider, {\n        variant: \"solid\",\n        className: classes.divider,\n        my: theme.spacing.xs / 2,\n        key: index\n      });\n    }\n\n    return null;\n  });\n  return /* @__PURE__ */React.createElement(Box, __spreadValues({\n    ref: setWrapperElement,\n    onMouseLeave: handleMouseLeave,\n    onMouseEnter: handleMouseEnter,\n    className: cx(classes.root, className),\n    sx\n  }, others), menuControl, /* @__PURE__ */React.createElement(Popper, {\n    referenceElement,\n    transitionDuration,\n    transitionTimingFunction,\n    transition,\n    mounted: _opened,\n    position,\n    placement,\n    gutter,\n    withArrow,\n    arrowSize: 3,\n    zIndex,\n    arrowClassName: classes.arrow,\n    withinPortal\n  }, /* @__PURE__ */React.createElement(Paper, __spreadValues({\n    shadow,\n    className: classes.body,\n    role: \"menu\",\n    \"aria-orientation\": \"vertical\",\n    radius,\n    onMouseLeave: () => setHovered(-1),\n    ref: setDropdownElement,\n    id: uuid\n  }, others), content)));\n});\nMenu.Item = MenuItem;\nMenu.Label = MenuLabel;\nMenu.displayName = \"@mantine/core/Menu\";\nexport { Menu };","map":{"version":3,"sources":["D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\node_modules\\@mantine\\core\\src\\components\\Menu\\Menu.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useState, useRef, cloneElement, forwardRef } from 'react';\nimport {\n  useClickOutside,\n  useMergedRef,\n  useWindowEvent,\n  useUncontrolled,\n  useUuid,\n} from '@mantine/hooks';\nimport {\n  DefaultProps,\n  MantineNumberSize,\n  MantineShadow,\n  ClassNames,\n  getDefaultZIndex,\n  ForwardRefWithStaticComponents,\n} from '@mantine/styles';\nimport { filterChildrenByType } from '../../utils';\nimport { Box } from '../Box';\nimport { Divider } from '../Divider';\nimport { Paper } from '../Paper';\nimport { Text } from '../Text';\nimport { ActionIcon } from '../ActionIcon';\nimport { Popper, SharedPopperProps } from '../Popper';\nimport { MenuIcon } from './MenuIcon';\nimport { MenuItem, MenuItemType, MenuItemStylesNames } from './MenuItem/MenuItem';\nimport { MenuLabel } from './MenuLabel/MenuLabel';\nimport useStyles from './Menu.styles';\n\nexport type MenuStylesNames = ClassNames<typeof useStyles> | MenuItemStylesNames;\n\nexport interface MenuProps\n  extends DefaultProps<MenuStylesNames>,\n    SharedPopperProps,\n    React.ComponentPropsWithRef<'div'> {\n  /** <MenuItem /> and <Divider /> components only, children are passed to MenuBody component  */\n  children: React.ReactNode;\n\n  /** React element that will be used as menu control */\n  control?: React.ReactElement;\n\n  /** Use opened and onClose props to setup controlled menu */\n  opened?: boolean;\n\n  /** Called every time menu is closed */\n  onClose?(): void;\n\n  /** Called every time menu is opened */\n  onOpen?(): void;\n\n  /** Menu button aria-label and title props */\n  menuButtonLabel?: string;\n\n  /** Predefined menu width or number for width in px */\n  size?: MantineNumberSize | 'auto';\n\n  /** Predefined shadow from theme or box-shadow value */\n  shadow?: MantineShadow;\n\n  /** Should menu close on item click */\n  closeOnItemClick?: boolean;\n\n  /** Id attribute of menu */\n  menuId?: string;\n\n  /** Control prop to get element ref */\n  controlRefProp?: string;\n\n  /** Menu body z-index */\n  zIndex?: number;\n\n  /** Event which should open menu */\n  trigger?: 'click' | 'hover';\n\n  /** Close delay for hover trigger */\n  delay?: number;\n\n  /** Menu body and items border-radius */\n  radius?: MantineNumberSize;\n\n  /** Close menu on scroll */\n  closeOnScroll?: boolean;\n\n  /** Whether to render the dropdown in a Portal */\n  withinPortal?: boolean;\n\n  /** Should focus be trapped when menu is opened */\n  trapFocus?: boolean;\n\n  /** Events that should trigger outside clicks */\n  clickOutsideEvents?: string[];\n}\n\nconst defaultControl = (\n  <ActionIcon>\n    <MenuIcon />\n  </ActionIcon>\n);\n\ntype MenuComponent = ForwardRefWithStaticComponents<\n  MenuProps,\n  { Item: typeof MenuItem; Label: typeof MenuLabel }\n>;\n\nfunction getNextItem(active: number, items: MenuItemType[]) {\n  for (let i = active + 1; i < items.length; i += 1) {\n    if (!items[i].props.disabled && items[i].type === MenuItem) {\n      return i;\n    }\n  }\n\n  return active;\n}\n\nfunction findInitialItem(items: MenuItemType[]) {\n  for (let i = 0; i < items.length; i += 1) {\n    if (!items[i].props.disabled && items[i].type === MenuItem) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\nfunction getPreviousItem(active: number, items: MenuItemType[]) {\n  for (let i = active - 1; i >= 0; i -= 1) {\n    if (!items[i].props.disabled && items[i].type === MenuItem) {\n      return i;\n    }\n  }\n\n  if (!items[active] || items[active].type !== MenuItem) {\n    return findInitialItem(items);\n  }\n\n  return active;\n}\n\nexport const Menu: MenuComponent = forwardRef<HTMLButtonElement, MenuProps>(\n  (\n    {\n      control = defaultControl,\n      children,\n      onClose,\n      onOpen,\n      opened,\n      menuId,\n      closeOnItemClick = true,\n      transitionDuration = 250,\n      size = 'md',\n      shadow = 'md',\n      position = 'bottom',\n      placement = 'start',\n      gutter = 5,\n      withArrow = false,\n      transition = 'pop-top-left',\n      transitionTimingFunction,\n      menuButtonLabel,\n      controlRefProp = 'ref',\n      trigger = 'click',\n      radius = 'sm',\n      delay = 100,\n      zIndex = getDefaultZIndex('popover'),\n      withinPortal = true,\n      trapFocus = true,\n      classNames,\n      styles,\n      closeOnScroll = false,\n      onMouseLeave,\n      onMouseEnter,\n      onChange,\n      className,\n      sx,\n      clickOutsideEvents = ['click', 'touchstart'],\n      ...others\n    }: MenuProps,\n    ref\n  ) => {\n    const [hovered, setHovered] = useState(-1);\n    const buttonsRefs = useRef<Record<string, HTMLButtonElement>>({});\n    const { classes, cx, theme } = useStyles({ size }, { classNames, styles, name: 'Menu' });\n    const delayTimeout = useRef<number>();\n    const [referenceElement, setReferenceElement] = useState<HTMLButtonElement>(null);\n    const [wrapperElement, setWrapperElement] = useState<HTMLDivElement>(null);\n    const [dropdownElement, setDropdownElement] = useState<HTMLDivElement>(null);\n    const items = filterChildrenByType(children, [MenuItem, MenuLabel, Divider]);\n    const uuid = useUuid(menuId);\n\n    const focusReference = () => window.setTimeout(() => referenceElement?.focus(), 0);\n\n    const [_opened, setOpened] = useUncontrolled({\n      value: opened,\n      defaultValue: false,\n      finalValue: false,\n      rule: (val) => typeof val === 'boolean',\n      onChange: (value) =>\n        value\n          ? typeof onOpen === 'function' && onOpen()\n          : typeof onClose === 'function' && onClose(),\n    });\n\n    const openedRef = useRef(_opened);\n\n    const handleClose = () => {\n      if (openedRef.current) {\n        openedRef.current = false;\n        setOpened(false);\n      }\n    };\n\n    const handleOpen = () => {\n      openedRef.current = true;\n      setOpened(true);\n    };\n\n    useWindowEvent('scroll', () => closeOnScroll && handleClose());\n\n    useClickOutside(() => _opened && handleClose(), clickOutsideEvents, [\n      dropdownElement,\n      wrapperElement,\n    ]);\n\n    const toggleMenu = () => {\n      _opened ? handleClose() : handleOpen();\n    };\n\n    const controlEventHandlers =\n      trigger === 'click'\n        ? { onClick: toggleMenu }\n        : { onMouseEnter: handleOpen, onClick: toggleMenu };\n\n    const handleMouseLeave = (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n      typeof onMouseLeave === 'function' && onMouseLeave(event);\n\n      if (trigger === 'hover') {\n        if (delay > 0) {\n          delayTimeout.current = window.setTimeout(() => handleClose(), delay);\n        } else {\n          handleClose();\n        }\n      }\n    };\n\n    const handleMouseEnter = (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n      typeof onMouseEnter === 'function' && onMouseEnter(event);\n      window.clearTimeout(delayTimeout.current);\n    };\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLButtonElement>) => {\n      if (_opened) {\n        if (event.nativeEvent.code === 'Tab' && trapFocus) {\n          event.preventDefault();\n        }\n\n        if (event.nativeEvent.code === 'ArrowDown') {\n          event.preventDefault();\n          const prevIndex = getNextItem(hovered, items);\n          setHovered(prevIndex);\n          buttonsRefs.current[prevIndex].focus();\n        }\n\n        if (event.nativeEvent.code === 'ArrowUp') {\n          event.preventDefault();\n          const prevIndex = getPreviousItem(hovered, items);\n          setHovered(prevIndex);\n          buttonsRefs.current[prevIndex].focus();\n        }\n\n        if (event.nativeEvent.code === 'Escape') {\n          handleClose();\n          focusReference();\n        }\n      }\n    };\n\n    const menuControl = cloneElement(control, {\n      ...controlEventHandlers,\n      onClick: (event: React.MouseEvent<any>) => {\n        controlEventHandlers.onClick();\n        typeof control.props.onClick === 'function' && control.props.onClick(event);\n      },\n      role: 'button',\n      'aria-haspopup': 'menu',\n      'aria-expanded': _opened,\n      'aria-controls': uuid,\n      'aria-label': menuButtonLabel,\n      title: menuButtonLabel,\n      [controlRefProp]: useMergedRef(setReferenceElement, ref),\n      onKeyDown: handleKeyDown,\n    });\n\n    const content = items.map((item, index) => {\n      if (item.type === MenuItem) {\n        return (\n          <MenuItem<'button'>\n            {...item.props}\n            key={index}\n            hovered={hovered === index}\n            onHover={() => setHovered(index)}\n            radius={radius}\n            onMouseLeave={() => setHovered(-1)}\n            onKeyDown={handleKeyDown}\n            styles={styles}\n            classNames={classNames}\n            onClick={(event) => {\n              if (closeOnItemClick) {\n                handleClose();\n                trigger === 'click' && focusReference();\n              }\n\n              if (typeof item.props.onClick === 'function') {\n                item.props.onClick(event);\n              }\n            }}\n            ref={(node) => {\n              buttonsRefs.current[index] = node;\n            }}\n          />\n        );\n      }\n\n      if (item.type === MenuLabel) {\n        return <Text key={index} className={classes.label} {...(item.props as any)} />;\n      }\n\n      if (item.type === Divider) {\n        return (\n          <Divider\n            variant=\"solid\"\n            className={classes.divider}\n            my={theme.spacing.xs / 2}\n            key={index}\n          />\n        );\n      }\n\n      return null;\n    });\n\n    return (\n      <Box\n        ref={setWrapperElement}\n        onMouseLeave={handleMouseLeave}\n        onMouseEnter={handleMouseEnter}\n        className={cx(classes.root, className)}\n        sx={sx}\n        {...others}\n      >\n        {menuControl}\n\n        <Popper\n          referenceElement={referenceElement}\n          transitionDuration={transitionDuration}\n          transitionTimingFunction={transitionTimingFunction}\n          transition={transition}\n          mounted={_opened}\n          position={position}\n          placement={placement}\n          gutter={gutter}\n          withArrow={withArrow}\n          arrowSize={3}\n          zIndex={zIndex}\n          arrowClassName={classes.arrow}\n          withinPortal={withinPortal}\n        >\n          <Paper\n            shadow={shadow}\n            className={classes.body}\n            role=\"menu\"\n            aria-orientation=\"vertical\"\n            radius={radius}\n            onMouseLeave={() => setHovered(-1)}\n            ref={setDropdownElement}\n            id={uuid}\n            {...others}\n          >\n            {content}\n          </Paper>\n        </Popper>\n      </Box>\n    );\n  }\n) as any;\n\nMenu.Item = MenuItem;\nMenu.Label = MenuLabel;\n\nMenu.displayName = '@mantine/core/Menu';\n"]},"metadata":{},"sourceType":"module"}