{"ast":null,"code":"import { _ as __assign, a as _objectSpread2, b as _slicedToArray, u as uuidv4, g as getStringSet, S as SendbirdSdkContext, L as LocalizationProvider } from './LocalizationContext-2dd9ebb4.js';\nimport React__default, { useLayoutEffect, useState, useEffect, useReducer } from 'react';\nimport PropTypes from 'prop-types';\nimport Sb from 'sendbird';\nimport { R as RESET_USER, I as INIT_USER, U as UPDATE_USER_INFO } from './actionTypes-62b820c3.js';\nimport { i as isTextuallyNull } from './index-2b8da253.js';\nimport cssVars from 'css-vars-ponyfill';\nvar INIT_SDK = 'INIT_SDK';\nvar SET_SDK_LOADING = 'SET_SDK_LOADING';\nvar RESET_SDK = 'RESET_SDK';\nvar SDK_ERROR = 'SDK_ERROR';\nvar APP_VERSION_STRING = '2.7.0';\n\nvar disconnectSdk = function disconnectSdk(_ref) {\n  var sdkDispatcher = _ref.sdkDispatcher,\n      userDispatcher = _ref.userDispatcher,\n      sdk = _ref.sdk,\n      onDisconnect = _ref.onDisconnect;\n  sdkDispatcher({\n    type: SET_SDK_LOADING,\n    payload: true\n  });\n\n  if (sdk && sdk.disconnect) {\n    sdk.disconnect().then(function () {\n      sdkDispatcher({\n        type: RESET_SDK\n      });\n      userDispatcher({\n        type: RESET_USER\n      });\n    }).finally(function () {\n      onDisconnect();\n    });\n  } else {\n    onDisconnect();\n  }\n};\n\nvar handleConnection = function handleConnection(_ref2, dispatchers) {\n  var userId = _ref2.userId,\n      appId = _ref2.appId,\n      nickname = _ref2.nickname,\n      profileUrl = _ref2.profileUrl,\n      accessToken = _ref2.accessToken,\n      sdk = _ref2.sdk,\n      logger = _ref2.logger;\n  var sdkDispatcher = dispatchers.sdkDispatcher,\n      userDispatcher = dispatchers.userDispatcher;\n  disconnectSdk({\n    sdkDispatcher: sdkDispatcher,\n    userDispatcher: userDispatcher,\n    sdk: sdk,\n    logger: logger,\n    onDisconnect: function onDisconnect() {\n      logger.info('Setup connection');\n      sdkDispatcher({\n        type: SET_SDK_LOADING,\n        payload: true\n      });\n\n      if (userId && appId) {\n        var newSdk = new Sb({\n          appId: appId\n        }); // to check if code is released version from rollup and *not from storybook*\n        // see rollup config file\n\n        {\n          newSdk.addExtension('sb_uikit', APP_VERSION_STRING);\n        }\n\n        var connectCbSucess = function connectCbSucess(user) {\n          sdkDispatcher({\n            type: INIT_SDK,\n            payload: newSdk\n          });\n          userDispatcher({\n            type: INIT_USER,\n            payload: user\n          }); // use nickname/profileUrl if provided\n          // or set userID as nickname\n\n          if ((nickname !== user.nickname || profileUrl !== user.profileUrl) && !(isTextuallyNull(nickname) && isTextuallyNull(profileUrl))) {\n            newSdk.updateCurrentUserInfo(nickname || user.nickname, profileUrl || user.profileUrl).then(function (namedUser) {\n              userDispatcher({\n                type: UPDATE_USER_INFO,\n                payload: namedUser\n              });\n            });\n          }\n        };\n\n        var connectCbError = function connectCbError(e) {\n          logger.error('Connection failed', \"\".concat(e));\n          sdkDispatcher({\n            type: RESET_SDK\n          });\n          sdkDispatcher({\n            type: RESET_USER\n          });\n          sdkDispatcher({\n            type: SDK_ERROR\n          });\n        };\n\n        if (accessToken) {\n          newSdk.connect(userId, accessToken).then(function (res) {\n            return connectCbSucess(res);\n          }).catch(function (err) {\n            return connectCbError(err);\n          });\n        } else {\n          newSdk.connect(userId).then(function (res) {\n            return connectCbSucess(res);\n          }).catch(function (err) {\n            return connectCbError(err);\n          });\n        }\n      } else {\n        sdkDispatcher({\n          type: SDK_ERROR\n        });\n        logger.warning('Connection failed', 'UserId or appId missing');\n      }\n    }\n  });\n};\n\nvar isEmpty = function isEmpty(obj) {\n  if (obj === null || obj === undefined) {\n    return true;\n  }\n\n  for (var prop in obj) {\n    if (obj.hasOwnProperty(prop)) {\n      return false;\n    }\n  }\n\n  return JSON.stringify(obj) === JSON.stringify({});\n};\n\nvar useTheme = function useTheme(overrides) {\n  useLayoutEffect(function () {\n    if (!isEmpty(overrides)) {\n      cssVars({\n        variables: __assign({\n          '--sendbird-dark-primary-500': '#4d2aa6',\n          '--sendbird-dark-primary-400': '#6440C4',\n          '--sendbird-dark-primary-300': '#7B53EF',\n          '--sendbird-dark-primary-200': '#9E8CF5',\n          '--sendbird-dark-primary-100': '#E2DFFF',\n          '--sendbird-dark-secondary-500': '#007A7A',\n          '--sendbird-dark-secondary-400': '#189A8D',\n          '--sendbird-dark-secondary-300': '#2EBA9F',\n          '--sendbird-dark-secondary-200': '#6FD6BE',\n          '--sendbird-dark-secondary-100': '#AEF2DC',\n          '--sendbird-dark-information-100': '#b2d9ff',\n          '--sendbird-dark-error-500': '#A30E2D',\n          '--sendbird-dark-error-400': '#C11F41',\n          '--sendbird-dark-error-300': '#E53157',\n          '--sendbird-dark-error-200': '#FF6183',\n          '--sendbird-dark-error-100': '#FFABBD',\n          '--sendbird-dark-background-700': '#000000',\n          '--sendbird-dark-background-600': '#161616',\n          '--sendbird-dark-background-500': '#2C2C2C',\n          '--sendbird-dark-background-400': '#393939',\n          '--sendbird-dark-background-300': '#A8A8A8',\n          '--sendbird-dark-background-200': '#D9D9D9',\n          '--sendbird-dark-background-100': '#F0F0F0',\n          '--sendbird-dark-background-50': '#FFFFFF',\n          '--sendbird-dark-overlay': 'rgba(0, 0, 0, 0.32)',\n          '--sendbird-dark-onlight-01': 'rgba(0, 0, 0, 0.88)',\n          '--sendbird-dark-onlight-02': 'rgba(0, 0, 0, 0.50)',\n          '--sendbird-dark-onlight-03': 'rgba(0, 0, 0, 0.38)',\n          '--sendbird-dark-onlight-04': 'rgba(0, 0, 0, 0.12)',\n          '--sendbird-dark-ondark-01': 'rgba(255, 255, 255, 0.88)',\n          '--sendbird-dark-ondark-02': 'rgba(255, 255, 255, 0.50)',\n          '--sendbird-dark-ondark-03': 'rgba(255, 255, 255, 0.38)',\n          '--sendbird-dark-ondark-04': 'rgba(255, 255, 255, 0.12)',\n          '--sendbird-dark-shadow-01': '0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)',\n          '--sendbird-dark-shadow-02': '0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)',\n          '--sendbird-dark-shadow-03': '0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)',\n          '--sendbird-dark-shadow-04': '0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)',\n          '--sendbird-dark-shadow-message-input': '0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)',\n          '--sendbird-light-primary-500': '#4d2aa6',\n          '--sendbird-light-primary-400': '#6440C4',\n          '--sendbird-light-primary-300': '#7B53EF',\n          '--sendbird-light-primary-200': '#9E8CF5',\n          '--sendbird-light-primary-100': '#E2DFFF',\n          '--sendbird-light-secondary-500': '#007A7A',\n          '--sendbird-light-secondary-400': '#189A8D',\n          '--sendbird-light-secondary-300': '#2EBA9F',\n          '--sendbird-light-secondary-200': '#6FD6BE',\n          '--sendbird-light-secondary-100': '#AEF2DC',\n          '--sendbird-light-information-100': '#b2d9ff',\n          '--sendbird-light-error-500': '#A30E2D',\n          '--sendbird-light-error-400': '#C11F41',\n          '--sendbird-light-error-300': '#E53157',\n          '--sendbird-light-error-200': '#FF6183',\n          '--sendbird-light-error-100': '#FFABBD',\n          '--sendbird-light-background-700': '#000000',\n          '--sendbird-light-background-600': '#161616',\n          '--sendbird-light-background-500': '#2C2C2C',\n          '--sendbird-light-background-400': '#393939',\n          '--sendbird-light-background-300': '#A8A8A8',\n          '--sendbird-light-background-200': '#D9D9D9',\n          '--sendbird-light-background-100': '#F0F0F0',\n          '--sendbird-light-background-50': ' #FFFFFF',\n          '--sendbird-light-overlay': 'rgba(0, 0, 0, 0.32)',\n          '--sendbird-light-onlight-01': 'rgba(0, 0, 0, 0.88)',\n          '--sendbird-light-onlight-02': 'rgba(0, 0, 0, 0.50)',\n          '--sendbird-light-onlight-03': 'rgba(0, 0, 0, 0.38)',\n          '--sendbird-light-onlight-04': 'rgba(0, 0, 0, 0.12)',\n          '--sendbird-light-ondark-01': 'rgba(255, 255, 255, 0.88)',\n          '--sendbird-light-ondark-02': 'rgba(255, 255, 255, 0.50)',\n          '--sendbird-light-ondark-03': 'rgba(255, 255, 255, 0.38)',\n          '--sendbird-light-ondark-04': 'rgba(255, 255, 255, 0.12)',\n          '--sendbird-light-shadow-01': '0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)',\n          '--sendbird-light-shadow-02': '0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)',\n          '--sendbird-light-shadow-03': '0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)',\n          '--sendbird-light-shadow-04': '0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)',\n          '--sendbird-light-shadow-message-input': '0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)'\n        }, overrides)\n      });\n    }\n  }, [overrides]);\n};\n\nvar sdkInitialState = {\n  initialized: false,\n  loading: false,\n  sdk: {},\n  error: false\n};\n\nfunction reducer$1(state, action) {\n  switch (action.type) {\n    case SET_SDK_LOADING:\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        initialized: false,\n        loading: action.payload\n      });\n\n    case SDK_ERROR:\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        initialized: false,\n        loading: false,\n        error: true\n      });\n\n    case INIT_SDK:\n      return {\n        sdk: action.payload,\n        initialized: true,\n        loading: false,\n        error: false\n      };\n\n    case RESET_SDK:\n      return sdkInitialState;\n\n    default:\n      return state;\n  }\n}\n\nvar userInitialState = {\n  initialized: false,\n  loading: false,\n  user: {}\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case INIT_USER:\n      return {\n        initialized: true,\n        loading: false,\n        user: action.payload\n      };\n\n    case RESET_USER:\n      return userInitialState;\n\n    case UPDATE_USER_INFO:\n      return _objectSpread2(_objectSpread2({}, state), {}, {\n        user: action.payload\n      });\n\n    default:\n      return state;\n  }\n}\n\nfunction useConnectionStatus(sdk, logger) {\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isOnline = _useState2[0],\n      setIsOnline = _useState2[1];\n\n  useEffect(function () {\n    var uniqueHandlerId = uuidv4();\n    logger.warning('sdk changed', uniqueHandlerId);\n    var handler;\n\n    if (sdk && sdk.ConnectionHandler) {\n      handler = new sdk.ConnectionHandler();\n\n      handler.onReconnectStarted = function () {\n        setIsOnline(false);\n        logger.warning('onReconnectStarted', {\n          isOnline: isOnline\n        });\n      };\n\n      handler.onReconnectSucceeded = function () {\n        setIsOnline(true);\n        logger.warning('onReconnectSucceeded', {\n          isOnline: isOnline\n        });\n      };\n\n      handler.onReconnectFailed = function () {\n        sdk.reconnect();\n        logger.warning('onReconnectFailed');\n      };\n\n      logger.info('Added ConnectionHandler', uniqueHandlerId);\n      sdk.addConnectionHandler(uniqueHandlerId, handler);\n    }\n\n    return function () {\n      try {\n        sdk.removeConnectionHandler(uniqueHandlerId);\n        logger.info('Removed ConnectionHandler', uniqueHandlerId);\n      } catch (_unused) {//\n      }\n    };\n  }, [sdk]);\n  useEffect(function () {\n    var tryReconnect = function tryReconnect() {\n      try {\n        logger.warning('Try reconnecting SDK');\n\n        if (sdk.getConnectionState() !== 'OPEN') {\n          // connection is not broken yet\n          sdk.reconnect();\n        }\n      } catch (_unused2) {//\n      }\n    }; // addEventListener version\n\n\n    window.addEventListener('online', tryReconnect);\n    return function () {\n      window.removeEventListener('online', tryReconnect);\n    };\n  }, [sdk]); // add offline-class to body\n\n  useEffect(function () {\n    var body = document.querySelector('body');\n\n    if (!isOnline) {\n      try {\n        body.classList.add('sendbird__offline');\n        logger.info('Added class sendbird__offline to body');\n      } catch (e) {//\n      }\n    } else {\n      try {\n        body.classList.remove('sendbird__offline');\n        logger.info('Removed class sendbird__offline from body');\n      } catch (e) {//\n      }\n    }\n  }, [isOnline]);\n  return isOnline;\n} // Logger, pretty much explains it\n// in SendbirdProvider\n// const [logger, setLogger] = useState(LoggerFactory(logLevel));\n\n\nvar LOG_LEVELS = {\n  DEBUG: 'debug',\n  WARNING: 'warning',\n  ERROR: 'error',\n  INFO: 'info',\n  ALL: 'all'\n};\n\nvar colorLog = function colorLog(level) {\n  switch (level) {\n    case LOG_LEVELS.WARNING:\n      return 'color: Orange';\n\n    case LOG_LEVELS.ERROR:\n      return 'color: Red';\n\n    default:\n      return 'color: Gray';\n  }\n};\n\nvar printLog = function printLog(_ref) {\n  var level = _ref.level,\n      title = _ref.title,\n      _ref$description = _ref.description,\n      description = _ref$description === void 0 ? '' : _ref$description; // eslint-disable-next-line no-console\n\n  console.log(\"%c SendbirdUIKit | \".concat(level, \" | \").concat(new Date().toISOString(), \" | \").concat(title, \" \").concat(description && '|'), colorLog(level), description);\n};\n\nvar getDefaultLogger = function getDefaultLogger() {\n  return {\n    info: function info() {},\n    error: function error() {},\n    warning: function warning() {}\n  };\n};\n\nvar LoggerFactory = function LoggerFactory(lvl, customInterface) {\n  var logInterface = customInterface || printLog;\n  var lvlArray = Array.isArray(lvl) ? lvl : [lvl];\n\n  var applyLog = function applyLog(lgLvl) {\n    return function (title, description) {\n      return logInterface({\n        level: lgLvl,\n        title: title,\n        description: description\n      });\n    };\n  };\n\n  var logger = lvlArray.reduce(function (accumulator, currentLvl) {\n    if (currentLvl === LOG_LEVELS.DEBUG || currentLvl === LOG_LEVELS.ALL) {\n      return _objectSpread2(_objectSpread2({}, accumulator), {}, {\n        info: applyLog(LOG_LEVELS.INFO),\n        error: applyLog(LOG_LEVELS.ERROR),\n        warning: applyLog(LOG_LEVELS.WARNING)\n      });\n    }\n\n    if (currentLvl === LOG_LEVELS.INFO) {\n      return _objectSpread2(_objectSpread2({}, accumulator), {}, {\n        info: applyLog(LOG_LEVELS.INFO)\n      });\n    }\n\n    if (currentLvl === LOG_LEVELS.ERROR) {\n      return _objectSpread2(_objectSpread2({}, accumulator), {}, {\n        error: applyLog(LOG_LEVELS.ERROR)\n      });\n    }\n\n    if (currentLvl === LOG_LEVELS.WARNING) {\n      return _objectSpread2(_objectSpread2({}, accumulator), {}, {\n        warning: applyLog(LOG_LEVELS.WARNING)\n      });\n    }\n\n    return _objectSpread2({}, accumulator);\n  }, getDefaultLogger());\n  return logger;\n}; // https://davidwalsh.name/pubsub-javascript\n// we use pubsub to sync events between multiple components(example - ChannelList, Channel)\n// for example, if customer sends a message from their custom component\n// without pubsub,we would not be able to listen to it\n// in our ChannelList or Conversation\n\n\nvar pubSubFactory = function () {\n  var topics = {};\n  var hOP = topics.hasOwnProperty;\n  return {\n    __getTopics: function __getTopics() {\n      return topics;\n    },\n    subscribe: function subscribe(topic, listener) {\n      // Create the topic's object if not yet created\n      if (!hOP.call(topics, topic)) {\n        topics[topic] = [];\n      } // Add the listener to queue\n\n\n      var index = topics[topic].push(listener) - 1; // Provide handle back for removal of topic\n\n      return {\n        remove: function remove() {\n          delete topics[topic][index];\n        }\n      };\n    },\n    publish: function publish(topic, info) {\n      // If the topic doesn't exist, or there's no listeners in queue, just leave\n      if (!hOP.call(topics, topic)) {\n        return;\n      } // Cycle through topics queue, fire!\n\n\n      topics[topic].forEach(function (item) {\n        item(info !== undefined ? info : {});\n      });\n    }\n  };\n};\n\nfunction useAppendDomNode() {\n  var ids = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var rootSelector = arguments.length > 1 ? arguments[1] : undefined;\n  useEffect(function () {\n    var root = document.querySelector(rootSelector);\n    ids.forEach(function (id) {\n      var elem = document.createElement('div');\n      elem.setAttribute('id', id);\n      root.appendChild(elem);\n    });\n    return function () {\n      ids.forEach(function (id) {\n        var target = document.getElementById(id);\n\n        if (target) {\n          root.removeChild(target);\n        }\n      });\n    };\n  }, []);\n}\n\nfunction Sendbird(props) {\n  var userId = props.userId,\n      appId = props.appId,\n      accessToken = props.accessToken,\n      children = props.children,\n      disableUserProfile = props.disableUserProfile,\n      renderUserProfile = props.renderUserProfile,\n      allowProfileEdit = props.allowProfileEdit,\n      theme = props.theme,\n      nickname = props.nickname,\n      dateLocale = props.dateLocale,\n      profileUrl = props.profileUrl,\n      userListQuery = props.userListQuery,\n      _props$config = props.config,\n      config = _props$config === void 0 ? {} : _props$config,\n      colorSet = props.colorSet,\n      stringSet = props.stringSet,\n      imageCompression = props.imageCompression,\n      useReaction = props.useReaction;\n  var _config$logLevel = config.logLevel,\n      logLevel = _config$logLevel === void 0 ? '' : _config$logLevel;\n\n  var _useState = useState(LoggerFactory(logLevel)),\n      _useState2 = _slicedToArray(_useState, 2),\n      logger = _useState2[0],\n      setLogger = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pubSub = _useState4[0],\n      setPubSub = _useState4[1];\n\n  var _useReducer = useReducer(reducer$1, sdkInitialState),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      sdkStore = _useReducer2[0],\n      sdkDispatcher = _useReducer2[1];\n\n  var _useReducer3 = useReducer(reducer, userInitialState),\n      _useReducer4 = _slicedToArray(_useReducer3, 2),\n      userStore = _useReducer4[0],\n      userDispatcher = _useReducer4[1];\n\n  useTheme(colorSet);\n  useEffect(function () {\n    setPubSub(pubSubFactory());\n  }, []);\n  useEffect(function () {\n    logger.info('App Init'); // dispatch action\n\n    handleConnection({\n      userId: userId,\n      appId: appId,\n      accessToken: accessToken,\n      sdkStore: sdkStore,\n      nickname: nickname,\n      profileUrl: profileUrl,\n      sdk: sdkStore.sdk,\n      logger: logger\n    }, {\n      sdkDispatcher: sdkDispatcher,\n      userDispatcher: userDispatcher\n    });\n  }, [userId, appId, accessToken]); // to create a pubsub to communicate between parent and child\n\n  useEffect(function () {\n    setLogger(LoggerFactory(logLevel));\n  }, [logLevel]);\n  useAppendDomNode(['sendbird-modal-root', 'sendbird-dropdown-portal', 'sendbird-emoji-list-portal'], 'body'); // should move to reducer\n\n  var _useState5 = useState(theme),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currenttheme = _useState6[0],\n      setCurrenttheme = _useState6[1];\n\n  useEffect(function () {\n    setCurrenttheme(theme);\n  }, [theme]); // add-remove theme from body\n\n  useEffect(function () {\n    logger.info('Setup theme', \"Theme: \".concat(currenttheme));\n\n    try {\n      var body = document.querySelector('body');\n      body.classList.remove('sendbird-theme--light');\n      body.classList.remove('sendbird-theme--dark');\n      body.classList.add(\"sendbird-theme--\".concat(currenttheme || 'light'));\n      logger.info('Finish setup theme'); // eslint-disable-next-line no-empty\n    } catch (e) {\n      logger.warning('Setup theme failed', \"\".concat(e));\n    }\n\n    return function () {\n      try {\n        var _body = document.querySelector('body');\n\n        _body.classList.remove('sendbird-theme--light');\n\n        _body.classList.remove('sendbird-theme--dark'); // eslint-disable-next-line no-empty\n\n      } catch (_unused) {}\n    };\n  }, [currenttheme]);\n  var isOnline = useConnectionStatus(sdkStore.sdk, logger);\n  var localeStringSet = React__default.useMemo(function () {\n    if (!stringSet) {\n      return getStringSet('en');\n    }\n\n    return _objectSpread2(_objectSpread2({}, getStringSet('en')), stringSet);\n  }, [stringSet]);\n  return /*#__PURE__*/React__default.createElement(SendbirdSdkContext.Provider, {\n    value: {\n      stores: {\n        sdkStore: sdkStore,\n        userStore: userStore\n      },\n      dispatchers: {\n        sdkDispatcher: sdkDispatcher,\n        userDispatcher: userDispatcher,\n        reconnect: function reconnect() {\n          handleConnection({\n            userId: userId,\n            appId: appId,\n            accessToken: accessToken,\n            sdkStore: sdkStore,\n            nickname: nickname,\n            profileUrl: profileUrl,\n            logger: logger,\n            sdk: sdkStore.sdk\n          }, {\n            sdkDispatcher: sdkDispatcher,\n            userDispatcher: userDispatcher\n          });\n        }\n      },\n      config: {\n        disableUserProfile: disableUserProfile,\n        renderUserProfile: renderUserProfile,\n        allowProfileEdit: allowProfileEdit,\n        isOnline: isOnline,\n        userId: userId,\n        appId: appId,\n        accessToken: accessToken,\n        theme: currenttheme,\n        setCurrenttheme: setCurrenttheme,\n        userListQuery: userListQuery,\n        logger: logger,\n        pubSub: pubSub,\n        imageCompression: imageCompression,\n        useReaction: useReaction\n      }\n    }\n  }, /*#__PURE__*/React__default.createElement(LocalizationProvider, {\n    stringSet: localeStringSet,\n    dateLocale: dateLocale\n  }, children));\n}\n\nSendbird.propTypes = {\n  userId: PropTypes.string.isRequired,\n  appId: PropTypes.string.isRequired,\n  accessToken: PropTypes.string,\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.arrayOf(PropTypes.element), PropTypes.any]).isRequired,\n  theme: PropTypes.string,\n  nickname: PropTypes.string,\n  profileUrl: PropTypes.string,\n  dateLocale: PropTypes.shape({}),\n  disableUserProfile: PropTypes.bool,\n  renderUserProfile: PropTypes.func,\n  allowProfileEdit: PropTypes.bool,\n  userListQuery: PropTypes.func,\n  config: PropTypes.shape({\n    // None Error Warning Info 'All/Debug'\n    logLevel: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n    pubSub: PropTypes.shape({\n      subscribe: PropTypes.func,\n      publish: PropTypes.func\n    })\n  }),\n  stringSet: PropTypes.objectOf(PropTypes.string),\n  colorSet: PropTypes.objectOf(PropTypes.string),\n  useReaction: PropTypes.bool,\n  imageCompression: PropTypes.shape({\n    compressionRate: PropTypes.number,\n    resizingWidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    resizingHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n  })\n};\nSendbird.defaultProps = {\n  accessToken: '',\n  theme: 'light',\n  nickname: '',\n  profileUrl: '',\n  dateLocale: null,\n  disableUserProfile: false,\n  renderUserProfile: null,\n  allowProfileEdit: false,\n  userListQuery: null,\n  config: {},\n  stringSet: null,\n  colorSet: null,\n  imageCompression: {},\n  useReaction: true\n};\nexport { Sendbird as default };","map":{"version":3,"sources":["D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\lib\\dux\\sdk\\actionTypes.js","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\lib\\dux\\sdk\\thunks.js","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\lib\\hooks\\useTheme.ts","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\lib\\dux\\sdk\\initialState.js","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\lib\\dux\\sdk\\reducers.js","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\lib\\dux\\user\\initialState.js","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\lib\\dux\\user\\reducers.js","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\lib\\hooks\\useOnlineStatus.js","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\lib\\Logger\\index.js","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\lib\\pubSub\\index.js","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\hooks\\useAppendDomNode.js","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\lib\\Sendbird.jsx"],"names":["INIT_SDK","SET_SDK_LOADING","RESET_SDK","SDK_ERROR","APP_VERSION_STRING","disconnectSdk","sdkDispatcher","userDispatcher","sdk","onDisconnect","type","payload","RESET_USER","handleConnection","userId","appId","nickname","profileUrl","accessToken","logger","dispatchers","newSdk","connectCbSucess","user","isTextuallyNull","namedUser","connectCbError","isEmpty","obj","JSON","useTheme","useLayoutEffect","cssVars","variables","overrides","initialized","loading","error","action","isOnline","setIsOnline","useState","useEffect","uniqueHandlerId","uuidv4","handler","tryReconnect","window","body","document","LOG_LEVELS","DEBUG","WARNING","ERROR","INFO","ALL","colorLog","printLog","level","title","description","console","getDefaultLogger","info","warning","LoggerFactory","logInterface","customInterface","lvlArray","Array","applyLog","currentLvl","topics","hOP","__getTopics","subscribe","index","remove","publish","item","ids","rootSelector","root","elem","target","children","disableUserProfile","renderUserProfile","allowProfileEdit","theme","dateLocale","userListQuery","config","colorSet","stringSet","imageCompression","useReaction","props","logLevel","setLogger","pubSub","setPubSub","sdkStore","useReducer","userStore","pubSubFactory","useAppendDomNode","currenttheme","setCurrenttheme","useOnlineStatus","localeStringSet","getStringSet","stores","reconnect","Sendbird","PropTypes","func","compressionRate","resizingWidth","resizingHeight"],"mappings":"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","sourcesContent":["export const INIT_SDK = 'INIT_SDK';\nexport const SET_SDK_LOADING = 'SET_SDK_LOADING';\nexport const RESET_SDK = 'RESET_SDK';\nexport const SDK_ERROR = 'SDK_ERROR';\n","import Sb from 'sendbird';\n\nimport {\n  INIT_SDK,\n  SET_SDK_LOADING,\n  RESET_SDK,\n  SDK_ERROR,\n} from './actionTypes';\nimport { INIT_USER, UPDATE_USER_INFO, RESET_USER } from '../user/actionTypes';\nimport { isTextuallyNull } from '../../../utils';\n\nconst APP_VERSION_STRING = '__uikit_app_version__';\nconst IS_ROLLUP = '__is_rollup__';\nconst IS_ROLLUP_REPLACE = '__is_rollup_replace__';\n\nexport const disconnectSdk = ({\n  sdkDispatcher,\n  userDispatcher,\n  sdk,\n  onDisconnect,\n}) => {\n  sdkDispatcher({ type: SET_SDK_LOADING, payload: true });\n  if (sdk && sdk.disconnect) {\n    sdk.disconnect()\n      .then(() => {\n        sdkDispatcher({ type: RESET_SDK });\n        userDispatcher({ type: RESET_USER });\n      })\n      .finally(() => {\n        onDisconnect();\n      });\n  } else {\n    onDisconnect();\n  }\n};\n\nexport const handleConnection = ({\n  userId,\n  appId,\n  nickname,\n  profileUrl,\n  accessToken,\n  sdk,\n  logger,\n}, dispatchers) => {\n  const {\n    sdkDispatcher,\n    userDispatcher,\n  } = dispatchers;\n  disconnectSdk({\n    sdkDispatcher,\n    userDispatcher,\n    sdk,\n    logger,\n    onDisconnect: () => {\n      logger.info('Setup connection');\n      sdkDispatcher({ type: SET_SDK_LOADING, payload: true });\n      if (userId && appId) {\n        const newSdk = new Sb({ appId });\n        // to check if code is released version from rollup and *not from storybook*\n        // see rollup config file\n        if (IS_ROLLUP === IS_ROLLUP_REPLACE) {\n          newSdk.addExtension('sb_uikit', APP_VERSION_STRING);\n        }\n        const connectCbSucess = (user) => {\n          sdkDispatcher({ type: INIT_SDK, payload: newSdk });\n          userDispatcher({ type: INIT_USER, payload: user });\n          // use nickname/profileUrl if provided\n          // or set userID as nickname\n          if ((nickname !== user.nickname || profileUrl !== user.profileUrl)\n            && !(isTextuallyNull(nickname) && isTextuallyNull(profileUrl))\n          ) {\n            newSdk.updateCurrentUserInfo(nickname || user.nickname, profileUrl || user.profileUrl)\n              .then((namedUser) => {\n                userDispatcher({ type: UPDATE_USER_INFO, payload: namedUser });\n              });\n          }\n        };\n\n        const connectCbError = (e) => {\n          logger.error('Connection failed', `${e}`);\n          sdkDispatcher({ type: RESET_SDK });\n          sdkDispatcher({ type: RESET_USER });\n          sdkDispatcher({ type: SDK_ERROR });\n        };\n\n        if (accessToken) {\n          newSdk.connect(userId, accessToken)\n            .then((res) => connectCbSucess(res))\n            .catch((err) => connectCbError(err));\n        } else {\n          newSdk.connect(userId)\n            .then((res) => connectCbSucess(res))\n            .catch((err) => connectCbError(err));\n        }\n      } else {\n        sdkDispatcher({ type: SDK_ERROR });\n        logger.warning('Connection failed', 'UserId or appId missing');\n      }\n    },\n  });\n};\n","import { useLayoutEffect } from 'react';\nimport cssVars from 'css-vars-ponyfill';\n\nconst isEmpty = (obj) => {\n  if (obj === null || obj === undefined) {\n    return true;\n  }\n\n  for (const prop in obj) {\n    if (obj.hasOwnProperty(prop)) {\n      return false;\n    }\n  }\n  return JSON.stringify(obj) === JSON.stringify({});\n}\n\nconst useTheme = (overrides: Record<string, string>): void => {\n  useLayoutEffect(() => {\n    if (!isEmpty(overrides)) {\n      cssVars({\n        variables: {\n          ...{\n            '--sendbird-dark-primary-500': '#4d2aa6',\n            '--sendbird-dark-primary-400': '#6440C4',\n            '--sendbird-dark-primary-300': '#7B53EF',\n            '--sendbird-dark-primary-200': '#9E8CF5',\n            '--sendbird-dark-primary-100': '#E2DFFF',\n\n            '--sendbird-dark-secondary-500': '#007A7A',\n            '--sendbird-dark-secondary-400': '#189A8D',\n            '--sendbird-dark-secondary-300': '#2EBA9F',\n            '--sendbird-dark-secondary-200': '#6FD6BE',\n            '--sendbird-dark-secondary-100': '#AEF2DC',\n\n            '--sendbird-dark-information-100': '#b2d9ff',\n\n            '--sendbird-dark-error-500': '#A30E2D',\n            '--sendbird-dark-error-400': '#C11F41',\n            '--sendbird-dark-error-300': '#E53157',\n            '--sendbird-dark-error-200': '#FF6183',\n            '--sendbird-dark-error-100': '#FFABBD',\n\n            '--sendbird-dark-background-700': '#000000',\n            '--sendbird-dark-background-600': '#161616',\n            '--sendbird-dark-background-500': '#2C2C2C',\n            '--sendbird-dark-background-400': '#393939',\n            '--sendbird-dark-background-300': '#A8A8A8',\n            '--sendbird-dark-background-200': '#D9D9D9',\n            '--sendbird-dark-background-100': '#F0F0F0',\n            '--sendbird-dark-background-50': '#FFFFFF',\n\n            '--sendbird-dark-overlay': 'rgba(0, 0, 0, 0.32)',\n\n            '--sendbird-dark-onlight-01': 'rgba(0, 0, 0, 0.88)',\n            '--sendbird-dark-onlight-02': 'rgba(0, 0, 0, 0.50)',\n            '--sendbird-dark-onlight-03': 'rgba(0, 0, 0, 0.38)',\n            '--sendbird-dark-onlight-04': 'rgba(0, 0, 0, 0.12)',\n\n            '--sendbird-dark-ondark-01': 'rgba(255, 255, 255, 0.88)',\n            '--sendbird-dark-ondark-02': 'rgba(255, 255, 255, 0.50)',\n            '--sendbird-dark-ondark-03': 'rgba(255, 255, 255, 0.38)',\n            '--sendbird-dark-ondark-04': 'rgba(255, 255, 255, 0.12)',\n\n            '--sendbird-dark-shadow-01': '0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)',\n            '--sendbird-dark-shadow-02': '0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)',\n            '--sendbird-dark-shadow-03': '0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)',\n            '--sendbird-dark-shadow-04': '0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)',\n\n            '--sendbird-dark-shadow-message-input': '0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)',\n\n            '--sendbird-light-primary-500': '#4d2aa6',\n            '--sendbird-light-primary-400': '#6440C4',\n            '--sendbird-light-primary-300': '#7B53EF',\n            '--sendbird-light-primary-200': '#9E8CF5',\n            '--sendbird-light-primary-100': '#E2DFFF',\n\n            '--sendbird-light-secondary-500': '#007A7A',\n            '--sendbird-light-secondary-400': '#189A8D',\n            '--sendbird-light-secondary-300': '#2EBA9F',\n            '--sendbird-light-secondary-200': '#6FD6BE',\n            '--sendbird-light-secondary-100': '#AEF2DC',\n\n            '--sendbird-light-information-100': '#b2d9ff',\n\n            '--sendbird-light-error-500': '#A30E2D',\n            '--sendbird-light-error-400': '#C11F41',\n            '--sendbird-light-error-300': '#E53157',\n            '--sendbird-light-error-200': '#FF6183',\n            '--sendbird-light-error-100': '#FFABBD',\n\n            '--sendbird-light-background-700': '#000000',\n            '--sendbird-light-background-600': '#161616',\n            '--sendbird-light-background-500': '#2C2C2C',\n            '--sendbird-light-background-400': '#393939',\n            '--sendbird-light-background-300': '#A8A8A8',\n            '--sendbird-light-background-200': '#D9D9D9',\n            '--sendbird-light-background-100': '#F0F0F0',\n            '--sendbird-light-background-50': ' #FFFFFF',\n\n            '--sendbird-light-overlay': 'rgba(0, 0, 0, 0.32)',\n\n            '--sendbird-light-onlight-01': 'rgba(0, 0, 0, 0.88)',\n            '--sendbird-light-onlight-02': 'rgba(0, 0, 0, 0.50)',\n            '--sendbird-light-onlight-03': 'rgba(0, 0, 0, 0.38)',\n            '--sendbird-light-onlight-04': 'rgba(0, 0, 0, 0.12)',\n\n            '--sendbird-light-ondark-01': 'rgba(255, 255, 255, 0.88)',\n            '--sendbird-light-ondark-02': 'rgba(255, 255, 255, 0.50)',\n            '--sendbird-light-ondark-03': 'rgba(255, 255, 255, 0.38)',\n            '--sendbird-light-ondark-04': 'rgba(255, 255, 255, 0.12)',\n\n            '--sendbird-light-shadow-01': '0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)',\n            '--sendbird-light-shadow-02': '0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)',\n            '--sendbird-light-shadow-03': '0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)',\n            '--sendbird-light-shadow-04': '0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)',\n\n            '--sendbird-light-shadow-message-input': '0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)',\n          },\n          ...overrides,\n        },\n      });\n    }\n  }, [overrides]);\n};\n\nexport default useTheme;\n","export default {\n  initialized: false,\n  loading: false,\n  sdk: {},\n  error: false,\n};\n","import * as sdkActions from './actionTypes';\nimport initialState from './initialState';\n\nexport default function reducer(state, action) {\n  switch (action.type) {\n    case sdkActions.SET_SDK_LOADING:\n      return {\n        ...state,\n        initialized: false,\n        loading: action.payload,\n      };\n    case sdkActions.SDK_ERROR:\n      return {\n        ...state,\n        initialized: false,\n        loading: false,\n        error: true,\n      };\n    case sdkActions.INIT_SDK:\n      return {\n        sdk: action.payload,\n        initialized: true,\n        loading: false,\n        error: false,\n      };\n    case sdkActions.RESET_SDK:\n      return initialState;\n    default:\n      return state;\n  }\n}\n","export default {\n  initialized: false,\n  loading: false,\n  user: {},\n};\n","import * as actions from './actionTypes';\nimport initialState from './initialState';\n\nexport default function reducer(state, action) {\n  switch (action.type) {\n    case actions.INIT_USER:\n      return {\n        initialized: true,\n        loading: false,\n        user: action.payload,\n      };\n    case actions.RESET_USER:\n      return initialState;\n    case actions.UPDATE_USER_INFO:\n      return {\n        ...state,\n        user: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n","import { useState, useEffect } from 'react';\n\nimport { uuidv4 } from '../../utils/uuid';\n\nfunction useConnectionStatus(sdk, logger) {\n  const [isOnline, setIsOnline] = useState(true);\n\n  useEffect(() => {\n    const uniqueHandlerId = uuidv4();\n    logger.warning('sdk changed', uniqueHandlerId);\n    let handler;\n    if (sdk && sdk.ConnectionHandler) {\n      handler = new sdk.ConnectionHandler();\n\n      handler.onReconnectStarted = () => {\n        setIsOnline(false);\n        logger.warning('onReconnectStarted', { isOnline });\n      };\n      handler.onReconnectSucceeded = () => {\n        setIsOnline(true);\n        logger.warning('onReconnectSucceeded', { isOnline });\n      };\n      handler.onReconnectFailed = () => {\n        sdk.reconnect();\n        logger.warning('onReconnectFailed');\n      };\n      logger.info('Added ConnectionHandler', uniqueHandlerId);\n      sdk.addConnectionHandler(uniqueHandlerId, handler);\n    }\n    return () => {\n      try {\n        sdk.removeConnectionHandler(uniqueHandlerId);\n        logger.info('Removed ConnectionHandler', uniqueHandlerId);\n      } catch {\n        //\n      }\n    };\n  }, [sdk]);\n\n  useEffect(() => {\n    const tryReconnect = () => {\n      try {\n        logger.warning('Try reconnecting SDK');\n        if (sdk.getConnectionState() !== 'OPEN') { // connection is not broken yet\n          sdk.reconnect();\n        }\n      } catch {\n        //\n      }\n    };\n    // addEventListener version\n    window.addEventListener('online', tryReconnect);\n    return () => {\n      window.removeEventListener('online', tryReconnect);\n    };\n  }, [sdk]);\n\n  // add offline-class to body\n  useEffect(() => {\n    const body = document.querySelector('body');\n    if (!isOnline) {\n      try {\n        body.classList.add('sendbird__offline');\n        logger.info('Added class sendbird__offline to body');\n      } catch (e) {\n        //\n      }\n    } else {\n      try {\n        body.classList.remove('sendbird__offline');\n        logger.info('Removed class sendbird__offline from body');\n      } catch (e) {\n        //\n      }\n    }\n  }, [isOnline]);\n\n  return isOnline;\n}\n\nexport default useConnectionStatus;\n","// Logger, pretty much explains it\n// in SendbirdProvider\n// const [logger, setLogger] = useState(LoggerFactory(logLevel));\nexport const LOG_LEVELS = {\n  DEBUG: 'debug',\n  WARNING: 'warning',\n  ERROR: 'error',\n  INFO: 'info',\n  ALL: 'all',\n};\n\nconst colorLog = (level) => {\n  switch (level) {\n    case LOG_LEVELS.WARNING:\n      return ('color: Orange');\n    case LOG_LEVELS.ERROR:\n      return ('color: Red');\n    default:\n      return ('color: Gray');\n  }\n};\n\nexport const printLog = ({\n  level,\n  title,\n  description = '',\n}) => {\n  // eslint-disable-next-line no-console\n  console.log(\n    `%c SendbirdUIKit | ${level} | ${new Date().toISOString()} | ${title} ${description && '|'}`, colorLog(level),\n    description,\n  );\n};\n\nexport const getDefaultLogger = () => ({\n  info: () => {},\n  error: () => {},\n  warning: () => {},\n});\n\nexport const LoggerFactory = (lvl, customInterface) => {\n  const logInterface = customInterface || printLog;\n  const lvlArray = Array.isArray(lvl) ? lvl : [lvl];\n\n  const applyLog = (lgLvl) => (title, description) => logInterface({\n    level: lgLvl,\n    title,\n    description,\n  });\n\n  const logger = lvlArray.reduce((accumulator, currentLvl) => {\n    if (currentLvl === LOG_LEVELS.DEBUG || currentLvl === LOG_LEVELS.ALL) {\n      return ({\n        ...accumulator,\n        info: applyLog(LOG_LEVELS.INFO),\n        error: applyLog(LOG_LEVELS.ERROR),\n        warning: applyLog(LOG_LEVELS.WARNING),\n      });\n    }\n\n    if (currentLvl === LOG_LEVELS.INFO) {\n      return ({\n        ...accumulator,\n        info: applyLog(LOG_LEVELS.INFO),\n      });\n    }\n\n    if (currentLvl === LOG_LEVELS.ERROR) {\n      return ({\n        ...accumulator,\n        error: applyLog(LOG_LEVELS.ERROR),\n      });\n    }\n\n    if (currentLvl === LOG_LEVELS.WARNING) {\n      return ({\n        ...accumulator,\n        warning: applyLog(LOG_LEVELS.WARNING),\n      });\n    }\n\n    return { ...accumulator };\n  }, getDefaultLogger());\n  return logger;\n};\n","// https://davidwalsh.name/pubsub-javascript\n// we use pubsub to sync events between multiple components(example - ChannelList, Channel)\n// for example, if customer sends a message from their custom component\n// without pubsub,we would not be able to listen to it\n// in our ChannelList or Conversation\nexport default () => {\n  const topics = {};\n  const hOP = topics.hasOwnProperty;\n\n  return {\n    __getTopics: () => topics,\n    subscribe: (topic, listener) => {\n      // Create the topic's object if not yet created\n      if (!hOP.call(topics, topic)) { topics[topic] = []; }\n\n      // Add the listener to queue\n      const index = topics[topic].push(listener) - 1;\n\n      // Provide handle back for removal of topic\n      return {\n        remove: () => {\n          delete topics[topic][index];\n        },\n      };\n    },\n    publish: (topic, info) => {\n      // If the topic doesn't exist, or there's no listeners in queue, just leave\n      if (!hOP.call(topics, topic)) { return; }\n\n      // Cycle through topics queue, fire!\n      topics[topic].forEach((item) => {\n        item(info !== undefined ? info : {});\n      });\n    },\n  };\n};\n","import { useEffect } from 'react';\n\nfunction useAppendDomNode(ids = [], rootSelector) {\n  useEffect(() => {\n    const root = document.querySelector(rootSelector);\n    ids.forEach((id) => {\n      const elem = document.createElement('div');\n      elem.setAttribute('id', id);\n      root.appendChild(elem);\n    });\n    return () => {\n      ids.forEach((id) => {\n        const target = document.getElementById(id);\n        if (target) {\n          root.removeChild(target);\n        }\n      });\n    };\n  }, []);\n}\n\nexport default useAppendDomNode;\n","import './index.scss';\n\nimport React, { useEffect, useReducer, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { SendbirdSdkContext } from './SendbirdSdkContext';\nimport { handleConnection } from './dux/sdk/thunks';\n\nimport useTheme from './hooks/useTheme';\n\nimport sdkReducers from './dux/sdk/reducers';\nimport userReducers from './dux/user/reducers';\nimport sdkInitialState from './dux/sdk/initialState';\nimport userInitialState from './dux/user/initialState';\n\nimport useOnlineStatus from './hooks/useOnlineStatus';\n\nimport { LoggerFactory } from './Logger';\nimport pubSubFactory from './pubSub/index';\nimport useAppendDomNode from '../hooks/useAppendDomNode';\n\nimport { LocalizationProvider } from './LocalizationContext';\nimport getStringSet from '../ui/Label/stringSet';\n\nexport default function Sendbird(props) {\n  const {\n    userId,\n    appId,\n    accessToken,\n    children,\n    disableUserProfile,\n    renderUserProfile,\n    allowProfileEdit,\n    theme,\n    nickname,\n    dateLocale,\n    profileUrl,\n    userListQuery,\n    config = {},\n    colorSet,\n    stringSet,\n    imageCompression,\n    useReaction,\n  } = props;\n\n  const {\n    logLevel = '',\n  } = config;\n  const [logger, setLogger] = useState(LoggerFactory(logLevel));\n  const [pubSub, setPubSub] = useState();\n  const [sdkStore, sdkDispatcher] = useReducer(sdkReducers, sdkInitialState);\n  const [userStore, userDispatcher] = useReducer(userReducers, userInitialState);\n\n  useTheme(colorSet);\n\n  useEffect(() => {\n    setPubSub(pubSubFactory());\n  }, []);\n\n  useEffect(() => {\n    logger.info('App Init');\n    // dispatch action\n    handleConnection({\n      userId,\n      appId,\n      accessToken,\n      sdkStore,\n      nickname,\n      profileUrl,\n      sdk: sdkStore.sdk,\n      logger,\n    }, {\n      sdkDispatcher,\n      userDispatcher,\n    });\n  }, [userId, appId, accessToken]);\n\n  // to create a pubsub to communicate between parent and child\n  useEffect(() => {\n    setLogger(LoggerFactory(logLevel));\n  }, [logLevel]);\n\n  useAppendDomNode([\n    'sendbird-modal-root',\n    'sendbird-dropdown-portal',\n    'sendbird-emoji-list-portal',\n  ], 'body');\n\n  // should move to reducer\n  const [currenttheme, setCurrenttheme] = useState(theme);\n  useEffect(() => {\n    setCurrenttheme(theme);\n  }, [theme]);\n  // add-remove theme from body\n  useEffect(() => {\n    logger.info('Setup theme', `Theme: ${currenttheme}`);\n    try {\n      const body = document.querySelector('body');\n      body.classList.remove('sendbird-theme--light');\n      body.classList.remove('sendbird-theme--dark');\n      body.classList.add(`sendbird-theme--${currenttheme || 'light'}`);\n      logger.info('Finish setup theme');\n      // eslint-disable-next-line no-empty\n    } catch (e) {\n      logger.warning('Setup theme failed', `${e}`);\n    }\n    return () => {\n      try {\n        const body = document.querySelector('body');\n        body.classList.remove('sendbird-theme--light');\n        body.classList.remove('sendbird-theme--dark');\n        // eslint-disable-next-line no-empty\n      } catch { }\n    };\n  }, [currenttheme]);\n\n  const isOnline = useOnlineStatus(sdkStore.sdk, logger);\n\n  const localeStringSet = React.useMemo(() => {\n    if (!stringSet) {\n      return getStringSet('en');\n    }\n    return {\n      ...getStringSet('en'),\n      ...stringSet,\n    };\n  }, [stringSet]);\n\n  return (\n    <SendbirdSdkContext.Provider\n      value={{\n        stores: {\n          sdkStore,\n          userStore,\n        },\n        dispatchers: {\n          sdkDispatcher,\n          userDispatcher,\n          reconnect: () => {\n            handleConnection({\n              userId,\n              appId,\n              accessToken,\n              sdkStore,\n              nickname,\n              profileUrl,\n              logger,\n              sdk: sdkStore.sdk,\n            }, {\n              sdkDispatcher,\n              userDispatcher,\n            });\n          },\n        },\n        config: {\n          disableUserProfile,\n          renderUserProfile,\n          allowProfileEdit,\n          isOnline,\n          userId,\n          appId,\n          accessToken,\n          theme: currenttheme,\n          setCurrenttheme,\n          userListQuery,\n          logger,\n          pubSub,\n          imageCompression,\n          useReaction,\n        },\n      }}\n    >\n      <LocalizationProvider stringSet={localeStringSet} dateLocale={dateLocale}>\n        {children}\n      </LocalizationProvider>\n    </SendbirdSdkContext.Provider>\n  );\n}\n\nSendbird.propTypes = {\n  userId: PropTypes.string.isRequired,\n  appId: PropTypes.string.isRequired,\n  accessToken: PropTypes.string,\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n    PropTypes.any,\n  ]).isRequired,\n  theme: PropTypes.string,\n  nickname: PropTypes.string,\n  profileUrl: PropTypes.string,\n  dateLocale: PropTypes.shape({}),\n  disableUserProfile: PropTypes.bool,\n  renderUserProfile: PropTypes.func,\n  allowProfileEdit: PropTypes.bool,\n  userListQuery: PropTypes.func,\n  config: PropTypes.shape({\n    // None Error Warning Info 'All/Debug'\n    logLevel: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.arrayOf(PropTypes.string),\n    ]),\n    pubSub: PropTypes.shape({\n      subscribe: PropTypes.func,\n      publish: PropTypes.func,\n    }),\n  }),\n  stringSet: PropTypes.objectOf(PropTypes.string),\n  colorSet: PropTypes.objectOf(PropTypes.string),\n  useReaction: PropTypes.bool,\n  imageCompression: PropTypes.shape({\n    compressionRate: PropTypes.number,\n    resizingWidth: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n    ]),\n    resizingHeight: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n    ]),\n  }),\n};\n\nSendbird.defaultProps = {\n  accessToken: '',\n  theme: 'light',\n  nickname: '',\n  profileUrl: '',\n  dateLocale: null,\n  disableUserProfile: false,\n  renderUserProfile: null,\n  allowProfileEdit: false,\n  userListQuery: null,\n  config: {},\n  stringSet: null,\n  colorSet: null,\n  imageCompression: {},\n  useReaction: true,\n};\n"]},"metadata":{},"sourceType":"module"}