{"ast":null,"code":"import React__default, { useEffect, useCallback, useContext, useState, useReducer, useRef } from 'react';\nimport { _ as __assign, d as __spreadArray, c as LocalizationContext, w as withSendbirdContext } from './LocalizationContext-2dd9ebb4.js';\nimport { f as format } from './index-3b2392ac.js';\nimport { i as isToday, a as isYesterday, f as formatRelative } from './index-dc6f389c.js';\nimport { A as Avatar, L as Label, a as LabelTypography, b as LabelColors, c as IconTypes, I as Icon, d as IconColors, P as PlaceHolder, i as PlaceHolderTypes } from './index-8f3e6954.js';\nimport 'prop-types';\nvar GET_SEARCHED_MESSAGES = 'GET_SEARCHED_MESSAGES';\nvar GET_NEXT_SEARCHED_MESSAGES = 'GET_NEXT_SEARCHED_MESSAGES';\nvar START_MESSAGE_SEARCH = 'START_MESSAGE_SEARCH';\nvar START_GETTING_SEARCHED_MESSAGES = 'START_GETTING_SEARCHED_MESSAGES';\nvar SET_QUERY_INVALID = 'SET_QUERY_INVALID';\nvar SET_CURRENT_CHANNEL = 'SET_CURRENT_CHANNEL';\nvar CHANNEL_INVALID = 'CHANNEL_INVALID';\nvar RESET_SEARCH_STRING = 'RESET_SEARCH_STRING';\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case SET_CURRENT_CHANNEL:\n      {\n        var currentChannel = action.payload;\n        return __assign(__assign({}, state), {\n          currentChannel: currentChannel,\n          initialized: true\n        });\n      }\n\n    case CHANNEL_INVALID:\n      {\n        return __assign(__assign({}, state), {\n          currentChannel: null,\n          initialized: false\n        });\n      }\n\n    case GET_SEARCHED_MESSAGES:\n      {\n        var _a = action.payload,\n            messages = _a.messages,\n            createdQuery = _a.createdQuery;\n\n        if (createdQuery && createdQuery.channelUrl === state.currentMessageSearchQuery.channelUrl && createdQuery.key === state.currentMessageSearchQuery.key) {\n          return __assign(__assign({}, state), {\n            loading: false,\n            isInvalid: false,\n            allMessages: __spreadArray([], messages, true),\n            hasMoreResult: state.currentMessageSearchQuery.hasNext\n          });\n        }\n\n        return __assign({}, state);\n      }\n\n    case SET_QUERY_INVALID:\n      {\n        return __assign(__assign({}, state), {\n          isInvalid: true\n        });\n      }\n\n    case START_MESSAGE_SEARCH:\n      {\n        return __assign(__assign({}, state), {\n          isInvalid: false,\n          loading: false\n        });\n      }\n\n    case START_GETTING_SEARCHED_MESSAGES:\n      {\n        var currentMessageSearchQuery = action.payload;\n        return __assign(__assign({}, state), {\n          loading: true,\n          currentMessageSearchQuery: currentMessageSearchQuery\n        });\n      }\n\n    case GET_NEXT_SEARCHED_MESSAGES:\n      {\n        var messages = action.payload;\n        return __assign(__assign({}, state), {\n          allMessages: __spreadArray(__spreadArray([], state.allMessages, true), messages, true),\n          hasMoreResult: state.currentMessageSearchQuery.hasNext\n        });\n      }\n\n    case RESET_SEARCH_STRING:\n      {\n        return __assign(__assign({}, state), {\n          allMessages: []\n        });\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n}\n\nvar initialState = {\n  allMessages: [],\n  loading: false,\n  isInvalid: false,\n  initialized: false,\n  currentChannel: null,\n  currentMessageSearchQuery: null,\n  hasMoreResult: false\n};\n\nfunction useSetChannel(_a, _b) {\n  var channelUrl = _a.channelUrl,\n      sdkInit = _a.sdkInit;\n  var sdk = _b.sdk,\n      logger = _b.logger,\n      messageSearchDispathcer = _b.messageSearchDispathcer;\n  useEffect(function () {\n    if (channelUrl && sdkInit && sdk && (sdk.OpenChannel || sdk.GroupChannel)) {\n      sdk.GroupChannel.getChannel(channelUrl, function (groupChannel, error) {\n        if (!error) {\n          logger.info('MessageSearch | useSetChannel group channel', groupChannel);\n          messageSearchDispathcer({\n            type: SET_CURRENT_CHANNEL,\n            payload: groupChannel\n          });\n        } else {\n          messageSearchDispathcer({\n            type: CHANNEL_INVALID,\n            payload: null\n          });\n        }\n      });\n    }\n  }, [channelUrl, sdkInit]);\n}\n\nfunction useGetSearchedMessages(_a, _b) {\n  var currentChannel = _a.currentChannel,\n      channelUrl = _a.channelUrl,\n      requestString = _a.requestString,\n      messageSearchQuery = _a.messageSearchQuery,\n      onResultLoaded = _a.onResultLoaded,\n      retryCount = _a.retryCount;\n  var sdk = _b.sdk,\n      logger = _b.logger,\n      messageSearchDispathcer = _b.messageSearchDispathcer;\n  useEffect(function () {\n    messageSearchDispathcer({\n      type: START_MESSAGE_SEARCH,\n      payload: null\n    });\n\n    if (sdk && channelUrl && sdk.createMessageSearchQuery && currentChannel) {\n      if (requestString) {\n        var inputSearchMessageQueryObject = __assign(__assign({}, messageSearchQuery), {\n          order: 'ts',\n          channelUrl: channelUrl,\n          messageTimestampFrom: currentChannel.invitedAt\n        });\n\n        var createdQuery_1 = sdk.createMessageSearchQuery(requestString, inputSearchMessageQueryObject);\n        createdQuery_1.next(function (messages, error) {\n          if (!error) {\n            logger.info('MessageSearch | useGetSearchedMessages: succeeded getting messages', messages);\n            messageSearchDispathcer({\n              type: GET_SEARCHED_MESSAGES,\n              payload: {\n                messages: messages,\n                createdQuery: createdQuery_1\n              }\n            });\n\n            if (onResultLoaded && typeof onResultLoaded === 'function') {\n              onResultLoaded(messages, null);\n            }\n          } else {\n            logger.warning('MessageSearch | useGetSearchedMessages: getting failed', error);\n            messageSearchDispathcer({\n              type: SET_QUERY_INVALID,\n              payload: null\n            });\n\n            if (onResultLoaded && typeof onResultLoaded === 'function') {\n              onResultLoaded(null, error);\n            }\n          }\n        });\n        messageSearchDispathcer({\n          type: START_GETTING_SEARCHED_MESSAGES,\n          payload: createdQuery_1\n        });\n      } else {\n        logger.info('MessageSearch | useGetSeasrchedMessages: search string is empty');\n      }\n    }\n  }, [channelUrl, messageSearchQuery, requestString, currentChannel, retryCount]);\n}\n\nfunction useScrollCallback(_a, _b) {\n  var currentMessageSearchQuery = _a.currentMessageSearchQuery,\n      hasMoreResult = _a.hasMoreResult,\n      onResultLoaded = _a.onResultLoaded;\n  var logger = _b.logger,\n      messageSearchDispathcer = _b.messageSearchDispathcer;\n  return useCallback(function (cb) {\n    if (!hasMoreResult) {\n      logger.warning('MessageSearch | useScrollCallback: no more searched results', hasMoreResult);\n    }\n\n    if (currentMessageSearchQuery && currentMessageSearchQuery.hasNext) {\n      currentMessageSearchQuery.next(function (messages, error) {\n        if (!error) {\n          logger.info('MessageSearch | useScrollCallback: succeeded getting searched messages', messages);\n          messageSearchDispathcer({\n            type: GET_NEXT_SEARCHED_MESSAGES,\n            payload: messages\n          });\n          cb(messages, null);\n\n          if (onResultLoaded && typeof onResultLoaded === 'function') {\n            onResultLoaded(messages, null);\n          }\n        } else {\n          logger.warning('MessageSearch | useScrollCallback: failed getting searched messages', error);\n          cb(null, error);\n\n          if (onResultLoaded && typeof onResultLoaded === 'function') {\n            onResultLoaded(null, error);\n          }\n        }\n      });\n    } else {\n      logger.warning('MessageSearch | useScrollCallback: no currentMessageSearchQuery');\n    }\n  }, [currentMessageSearchQuery, hasMoreResult]);\n}\n\nvar getCreatedAt$1 = function (createdAt, locale) {\n  var optionalParam = locale ? {\n    locale: locale\n  } : null;\n\n  if (!createdAt) {\n    return '';\n  }\n\n  if (isToday(createdAt)) {\n    return format(createdAt, 'p', optionalParam);\n  }\n\n  if (isYesterday(createdAt)) {\n    return formatRelative(createdAt, new Date(), optionalParam);\n  }\n\n  return format(createdAt, 'MMM dd', optionalParam);\n};\n\nfunction MessageSearchItem(_a) {\n  var className = _a.className,\n      message = _a.message,\n      selected = _a.selected,\n      _onClick = _a.onClick;\n  var createdAt = message.createdAt;\n  var messageText = message.message;\n  var sender = message.sender || message._sender;\n  var profileUrl = sender.profileUrl,\n      nickname = sender.nickname;\n\n  var _b = useContext(LocalizationContext),\n      stringSet = _b.stringSet,\n      dateLocale = _b.dateLocale;\n\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), ['sendbird-message-search-item', selected ? 'sendbird-message-search-item--selected' : ''], false).join(' '),\n    onClick: function onClick(e) {\n      e.stopPropagation();\n\n      _onClick(message);\n    }\n  }, /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-message-search-item__left\"\n  }, /*#__PURE__*/React__default.createElement(Avatar, {\n    className: \"sendbird-message-search-item__left__sender-avatar\",\n    src: profileUrl,\n    alt: \"profile image\",\n    width: \"56px\",\n    height: \"56px\"\n  })), /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-message-search-item__right\"\n  }, /*#__PURE__*/React__default.createElement(Label, {\n    className: \"sendbird-message-search-item__right__sender-name\",\n    type: LabelTypography.SUBTITLE_2,\n    color: LabelColors.ONBACKGROUND_1\n  }, nickname || stringSet.NO_NAME), /*#__PURE__*/React__default.createElement(Label, {\n    className: \"sendbird-message-search-item__right__message-text\",\n    type: LabelTypography.BODY_2,\n    color: LabelColors.ONBACKGROUND_3\n  }, messageText), /*#__PURE__*/React__default.createElement(Label, {\n    className: \"sendbird-message-search-item__right__message-created-at\",\n    type: LabelTypography.CAPTION_3,\n    color: LabelColors.ONBACKGROUND_2\n  }, getCreatedAt$1(createdAt, dateLocale))), /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-message-search-item__right-footer\"\n  }));\n}\n\nfunction getCreatedAt(createdAt, locale) {\n  var optionalParam = locale ? {\n    locale: locale\n  } : null;\n\n  if (!createdAt) {\n    return '';\n  }\n\n  if (isToday(createdAt)) {\n    return format(createdAt, 'p', optionalParam);\n  }\n\n  if (isYesterday(createdAt)) {\n    return formatRelative(createdAt, new Date(), optionalParam);\n  }\n\n  return format(createdAt, 'MMM dd', optionalParam);\n}\n\nfunction getIconOfFileType(message) {\n  var url = message.url;\n  var fileMessageUrl = url;\n  var fileExtension = fileMessageUrl.match(/\\.([^.]*?)(?=\\?|#|$)/)[1];\n\n  if (/(jpg|jpeg|png)$/i.test(fileExtension)) {\n    return IconTypes.PHOTO;\n  } else if (/mp4$/i.test(fileExtension)) {\n    return IconTypes.PLAY;\n  } else if (/mp3/i.test(fileExtension)) {\n    return IconTypes.FILE_AUDIO;\n  } else if (/gif/i.test(fileExtension)) {\n    return IconTypes.GIF;\n  } else {\n    return IconTypes.FILE_DOCUMENT;\n  }\n}\n\nfunction truncate(fullText, textLimit) {\n  if (fullText.length <= textLimit) return fullText;\n  var separator = '...';\n  var sepLen = separator.length;\n  var charsToShow = textLimit - sepLen;\n  var frontChars = Math.ceil(charsToShow / 2);\n  var backChars = Math.floor(charsToShow / 2);\n  return fullText.substr(0, frontChars) + separator + fullText.substr(fullText.length - backChars);\n}\n\nfunction MessageSearchFileItem(props) {\n  var className = props.className,\n      message = props.message,\n      selected = props.selected,\n      _onClick = props.onClick;\n  var createdAt = message.createdAt,\n      url = message.url,\n      name = message.name;\n  var fileMessageUrl = url;\n  var sender = message.sender || message._sender;\n  var profileUrl = sender.profileUrl,\n      nickname = sender.nickname;\n\n  var _a = useContext(LocalizationContext),\n      stringSet = _a.stringSet,\n      dateLocale = _a.dateLocale;\n\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), ['sendbird-message-search-file-item', selected ? 'sendbird-message-search-file-item--selected' : ''], false).join(' '),\n    onClick: function onClick(e) {\n      e.stopPropagation();\n\n      _onClick(message);\n    }\n  }, /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-message-search-file-item__left\"\n  }, /*#__PURE__*/React__default.createElement(Avatar, {\n    className: \"sendbird-message-search-file-item__left__sender-avatar\",\n    src: profileUrl,\n    alt: \"profile image\",\n    width: \"56px\",\n    height: \"56px\"\n  })), /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-message-search-file-item__right\"\n  }, /*#__PURE__*/React__default.createElement(Label, {\n    className: \"sendbird-message-search-file-item__right__sender-name\",\n    type: LabelTypography.SUBTITLE_2,\n    color: LabelColors.ONBACKGROUND_1\n  }, nickname || stringSet.NO_NAME), /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-message-search-file-item__right__content\"\n  }, /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-message-search-file-item__right__content__type-icon\"\n  }, /*#__PURE__*/React__default.createElement(Icon, {\n    type: getIconOfFileType(message),\n    fillColor: IconColors.PRIMARY,\n    width: \"18px\",\n    height: \"18px\"\n  })), /*#__PURE__*/React__default.createElement(Label, {\n    className: \"sendbird-message-search-file-item__right__content__url\",\n    type: LabelTypography.BODY_2,\n    color: LabelColors.ONBACKGROUND_1\n  }, truncate(name || fileMessageUrl, 28)))), /*#__PURE__*/React__default.createElement(Label, {\n    className: \"sendbird-message-search-file-item__message-created-at\",\n    type: LabelTypography.CAPTION_3,\n    color: LabelColors.ONBACKGROUND_2\n  }, getCreatedAt(createdAt, dateLocale)), /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-message-search-file-item__right-footer\"\n  }));\n}\n\nvar DEBOUNCING_TIME = 500;\n\nfunction useSearchStringEffect(_a, _b) {\n  var searchString = _a.searchString;\n  var messageSearchDispathcer = _b.messageSearchDispathcer;\n\n  var _c = useState(''),\n      requestString = _c[0],\n      setRequestString = _c[1];\n\n  var _d = useState(null),\n      debouncingTimer = _d[0],\n      setDebouncingTimer = _d[1];\n\n  useEffect(function () {\n    clearTimeout(debouncingTimer);\n\n    if (searchString) {\n      setDebouncingTimer(setTimeout(function () {\n        setRequestString(searchString);\n      }, DEBOUNCING_TIME));\n    } else {\n      setRequestString('');\n      messageSearchDispathcer({\n        type: RESET_SEARCH_STRING,\n        payload: ''\n      });\n    }\n  }, [searchString]);\n  return requestString;\n}\n\nvar COMPONENT_CLASS_NAME = 'sendbird-message-search';\n\nfunction MessageSearch(props) {\n  var // sendbird internal props\n  stores = props.stores,\n      config = props.config,\n      // message search props\n  channelUrl = props.channelUrl,\n      searchString = props.searchString,\n      messageSearchQuery = props.messageSearchQuery,\n      renderSearchItem = props.renderSearchItem,\n      onResultLoaded = props.onResultLoaded,\n      onResultClick = props.onResultClick; // hook variables\n\n  var stringSet = useContext(LocalizationContext).stringSet;\n\n  var _a = useState(0),\n      retryCount = _a[0],\n      setRetryCount = _a[1]; // this is a trigger flag for activating useGetSearchMessages\n\n\n  var _b = useState(0),\n      selectedMessageId = _b[0],\n      setSelectedMessageId = _b[1];\n\n  var _c = useReducer(reducer, initialState),\n      messageSearchStore = _c[0],\n      messageSearchDispathcer = _c[1];\n\n  var allMessages = messageSearchStore.allMessages,\n      loading = messageSearchStore.loading,\n      isInvalid = messageSearchStore.isInvalid,\n      currentChannel = messageSearchStore.currentChannel,\n      currentMessageSearchQuery = messageSearchStore.currentMessageSearchQuery,\n      hasMoreResult = messageSearchStore.hasMoreResult;\n\n  var getChannelName = function getChannelName() {\n    if (currentChannel && currentChannel.name && currentChannel.name !== 'Group Channel') {\n      return currentChannel.name;\n    }\n\n    if (currentChannel && (currentChannel.name === 'Group Channel' || !currentChannel.name)) {\n      return currentChannel.members.map(function (member) {\n        return member.nickname || stringSet.NO_NAME;\n      }).join(', ');\n    }\n\n    return stringSet.NO_TITLE;\n  }; // const\n\n\n  var sdkStore = stores.sdkStore;\n  var logger = config.logger;\n  var sdk = sdkStore.sdk;\n  var sdkInit = sdkStore.initialized;\n  var scrollRef = useRef(null);\n\n  var handleOnScroll = function handleOnScroll(e) {\n    var scrollElement = e.target;\n    var scrollTop = scrollElement.scrollTop,\n        scrollHeight = scrollElement.scrollHeight,\n        clientHeight = scrollElement.clientHeight;\n\n    if (!hasMoreResult) {\n      return;\n    }\n\n    if (scrollTop + clientHeight >= scrollHeight) {\n      onScroll(function () {// after load more searched messages\n      });\n    }\n  };\n\n  useSetChannel({\n    channelUrl: channelUrl,\n    sdkInit: sdkInit\n  }, {\n    sdk: sdk,\n    logger: logger,\n    messageSearchDispathcer: messageSearchDispathcer\n  });\n  var requestString = useSearchStringEffect({\n    searchString: searchString\n  }, {\n    messageSearchDispathcer: messageSearchDispathcer\n  });\n  useGetSearchedMessages({\n    currentChannel: currentChannel,\n    channelUrl: channelUrl,\n    requestString: requestString,\n    messageSearchQuery: messageSearchQuery,\n    onResultLoaded: onResultLoaded,\n    retryCount: retryCount\n  }, {\n    sdk: sdk,\n    logger: logger,\n    messageSearchDispathcer: messageSearchDispathcer\n  });\n  var onScroll = useScrollCallback({\n    currentMessageSearchQuery: currentMessageSearchQuery,\n    hasMoreResult: hasMoreResult,\n    onResultLoaded: onResultLoaded\n  }, {\n    logger: logger,\n    messageSearchDispathcer: messageSearchDispathcer\n  });\n\n  var handleRetryToConnect = function handleRetryToConnect() {\n    setRetryCount(retryCount + 1);\n  };\n\n  if (isInvalid && searchString && requestString) {\n    return /*#__PURE__*/React__default.createElement(\"div\", {\n      className: COMPONENT_CLASS_NAME\n    }, /*#__PURE__*/React__default.createElement(PlaceHolder, {\n      type: PlaceHolderTypes.WRONG,\n      retryToConnect: handleRetryToConnect\n    }));\n  }\n\n  if (loading && searchString && requestString) {\n    return /*#__PURE__*/React__default.createElement(\"div\", {\n      className: COMPONENT_CLASS_NAME\n    }, /*#__PURE__*/React__default.createElement(PlaceHolder, {\n      type: PlaceHolderTypes.SEARCHING\n    }));\n  }\n\n  if (!searchString) {\n    return /*#__PURE__*/React__default.createElement(\"div\", {\n      className: COMPONENT_CLASS_NAME\n    }, /*#__PURE__*/React__default.createElement(PlaceHolder, {\n      type: PlaceHolderTypes.SEARCH_IN,\n      searchInString: getChannelName()\n    }));\n  }\n\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: COMPONENT_CLASS_NAME,\n    onScroll: handleOnScroll,\n    ref: scrollRef\n  }, allMessages.length > 0 ? allMessages.map(function (message) {\n    if (renderSearchItem) {\n      return renderSearchItem({\n        message: message,\n        onResultClick: onResultClick\n      });\n    }\n\n    if (message.messageType === 'file') {\n      return /*#__PURE__*/React__default.createElement(MessageSearchFileItem, {\n        className: COMPONENT_CLASS_NAME + \"__message-search-item\",\n        message: message,\n        key: message.messageId,\n        selected: selectedMessageId === message.messageId,\n        onClick: function onClick() {\n          onResultClick(message);\n          setSelectedMessageId(message.messageId);\n        }\n      });\n    }\n\n    return /*#__PURE__*/React__default.createElement(MessageSearchItem, {\n      className: COMPONENT_CLASS_NAME + \"__message-search-item\",\n      message: message,\n      key: message.messageId,\n      selected: selectedMessageId === message.messageId,\n      onClick: function onClick() {\n        onResultClick(message);\n        setSelectedMessageId(message.messageId);\n      }\n    });\n  }) : /*#__PURE__*/React__default.createElement(PlaceHolder, {\n    type: PlaceHolderTypes.NO_RESULTS\n  }));\n}\n\nvar MessageSearch$1 = withSendbirdContext(MessageSearch);\nexport { MessageSearch$1 as default };","map":{"version":3,"sources":["D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\smart-components\\MessageSearch\\dux\\actionTypes.ts","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\smart-components\\MessageSearch\\dux\\reducers.ts","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\smart-components\\MessageSearch\\dux\\initialState.ts","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\smart-components\\MessageSearch\\hooks\\useSetChannel.ts","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\smart-components\\MessageSearch\\hooks\\useGetSearchedMessages.ts","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\smart-components\\MessageSearch\\hooks\\useScrollCallback.ts","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\ui\\MessageSearchItem\\getCreatedAt.ts","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\ui\\MessageSearchItem\\index.tsx","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\ui\\MessageSearchFileItem\\utils.ts","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\ui\\MessageSearchFileItem\\index.tsx","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\smart-components\\MessageSearch\\hooks\\useSearchStringEffect.ts","D:\\D-Downlods\\MINI_ Prpject 2022\\lab-manage-sys\\client\\node_modules\\sendbird-uikit\\src\\smart-components\\MessageSearch\\index.tsx"],"names":["GET_SEARCHED_MESSAGES","GET_NEXT_SEARCHED_MESSAGES","START_MESSAGE_SEARCH","START_GETTING_SEARCHED_MESSAGES","SET_QUERY_INVALID","SET_CURRENT_CHANNEL","CHANNEL_INVALID","RESET_SEARCH_STRING","reducer","state","action","currentChannel","initialized","messages","createdQuery","loading","isInvalid","allMessages","hasMoreResult","hasNext","currentMessageSearchQuery","initialState","channelUrl","sdkInit","sdk","logger","messageSearchDispathcer","useEffect","type","payload","groupChannel","requestString","messageSearchQuery","onResultLoaded","retryCount","inputSearchMessageQueryObject","order","messageTimestampFrom","invitedAt","createdQuery_1","useCallback","cb","optionalParam","locale","isToday","format","isYesterday","formatRelative","MessageSearchItem","_a","className","message","selected","onClick","messageText","sender","nickname","stringSet","dateLocale","useContext","__spreadArray","Array","e","LabelTypography","LabelColors","ONBACKGROUND_1","ONBACKGROUND_3","ONBACKGROUND_2","getCreatedAt","createdAt","getIconOfFileType","fileMessageUrl","fileExtension","IconTypes","truncate","fullText","textLimit","separator","sepLen","charsToShow","frontChars","Math","backChars","MessageSearchFileItem","props","url","name","IconColors","DEBOUNCING_TIME","searchString","setRequestString","useState","debouncingTimer","setDebouncingTimer","clearTimeout","setTimeout","COMPONENT_CLASS_NAME","config","renderSearchItem","onResultClick","setRetryCount","selectedMessageId","setSelectedMessageId","messageSearchStore","useReducer","getChannelName","stores","sdkStore","scrollRef","useRef","handleOnScroll","scrollElement","scrollHeight","clientHeight","scrollTop","onScroll","useSetChannel","useSearchStringEffect","useGetSearchMessages","useScrollCallback","handleRetryToConnect","PlaceHolderTypes","SEARCHING","NO_RESULTS","widthSendbirdContext"],"mappings":"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","sourcesContent":["export const GET_SEARCHED_MESSAGES = 'GET_SEARCHED_MESSAGES';\nexport const GET_NEXT_SEARCHED_MESSAGES = 'GET_NEXT_SEARCHED_MESSAGES';\nexport const START_MESSAGE_SEARCH = 'START_MESSAGE_SEARCH';\nexport const START_GETTING_SEARCHED_MESSAGES = 'START_GETTING_SEARCHED_MESSAGES';\nexport const SET_QUERY_INVALID = 'SET_QUERY_INVALID';\n\nexport const SET_CURRENT_CHANNEL = 'SET_CURRENT_CHANNEL';\nexport const CHANNEL_INVALID = 'CHANNEL_INVALID';\nexport const RESET_SEARCH_STRING = 'RESET_SEARCH_STRING';\n","import { State as initialStateInterface } from './initialState';\nimport * as actionTypes from './actionTypes';\n\ninterface ActionInterface {\n  type: string;\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n  payload?: any;\n}\n\nexport default function reducer(\n  state: initialStateInterface,\n  action: ActionInterface,\n): initialStateInterface {\n  switch (action.type) {\n    case actionTypes.SET_CURRENT_CHANNEL: {\n      const currentChannel = action.payload;\n      return {\n        ...state,\n        currentChannel,\n        initialized: true,\n      };\n    }\n    case actionTypes.CHANNEL_INVALID: {\n      return {\n        ...state,\n        currentChannel: null,\n        initialized: false,\n      };\n    }\n    case actionTypes.GET_SEARCHED_MESSAGES: {\n      const { messages, createdQuery } = action.payload;\n      if (\n        createdQuery\n        && createdQuery.channelUrl === state.currentMessageSearchQuery.channelUrl\n        && createdQuery.key === state.currentMessageSearchQuery.key\n      ) {\n        return {\n          ...state,\n          loading: false,\n          isInvalid: false,\n          allMessages: [...messages],\n          hasMoreResult: state.currentMessageSearchQuery.hasNext,\n        };\n      }\n      return { ...state };\n    }\n    case actionTypes.SET_QUERY_INVALID: {\n      return {\n        ...state,\n        isInvalid: true,\n      }\n    }\n    case actionTypes.START_MESSAGE_SEARCH: {\n      return {\n        ...state,\n        isInvalid: false,\n        loading: false,\n      }\n    }\n    case actionTypes.START_GETTING_SEARCHED_MESSAGES: {\n      const currentMessageSearchQuery = action.payload;\n      return {\n        ...state,\n        loading: true,\n        currentMessageSearchQuery,\n      };\n    }\n    case actionTypes.GET_NEXT_SEARCHED_MESSAGES: {\n      const messages = action.payload;\n      return {\n        ...state,\n        allMessages: [...state.allMessages, ...messages],\n        hasMoreResult: state.currentMessageSearchQuery.hasNext,\n      };\n    }\n    case actionTypes.RESET_SEARCH_STRING: {\n      return {\n        ...state,\n        allMessages: [],\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n}\n","import SendbirdUIKit from '../../../index';\nexport interface State {\n  allMessages: Array<SendbirdUIKit.ClientFileMessage | SendbirdUIKit.ClientUserMessage>;\n  loading: boolean;\n  isInvalid: boolean;\n  initialized: boolean;\n  currentChannel: SendbirdUIKit.GroupChannelType;\n  currentMessageSearchQuery: SendbirdUIKit.ClientMessageSearchQuery;\n  hasMoreResult: boolean;\n}\n\nconst initialState: State = {\n  allMessages: [],\n  loading: false,\n  isInvalid: false,\n  initialized: false,\n  currentChannel: null,\n  currentMessageSearchQuery: null,\n  hasMoreResult: false,\n};\n\nexport default initialState;\n","import { useEffect } from 'react';\nimport * as messageActionTypes from '../dux/actionTypes';\n\ninterface MainProps {\n  channelUrl: string;\n  sdkInit: boolean;\n}\ninterface ToolProps {\n  sdk: SendbirdUIKit.Sdk;\n  logger: SendbirdUIKit.Logger;\n  messageSearchDispathcer: ({ type: string, payload: any }) => void;\n}\n\nfunction useSetChannel(\n  { channelUrl, sdkInit }: MainProps,\n  { sdk, logger, messageSearchDispathcer }: ToolProps,\n): void {\n  useEffect(() => {\n    if (channelUrl && sdkInit && sdk && (sdk.OpenChannel || sdk.GroupChannel)) {\n      sdk.GroupChannel.getChannel(channelUrl, (groupChannel, error) => {\n        if (!error) {\n          logger.info('MessageSearch | useSetChannel group channel', groupChannel);\n          messageSearchDispathcer({\n            type: messageActionTypes.SET_CURRENT_CHANNEL,\n            payload: groupChannel,\n          });\n        } else {\n          messageSearchDispathcer({\n            type: messageActionTypes.CHANNEL_INVALID,\n            payload: null,\n          });\n        }\n      });\n    }\n  }, [channelUrl, sdkInit]);\n}\n\nexport default useSetChannel;\n","import { useEffect } from 'react';\nimport * as messageActionTypes from '../dux/actionTypes';\nimport SendbirdUIKit from '../../../index';\nimport SendBird from 'sendbird';\n\ninterface MainProps {\n  currentChannel: SendbirdUIKit.GroupChannelType;\n  channelUrl: string;\n  requestString?: string;\n  messageSearchQuery?: SendbirdUIKit.MessageSearchQueryType;\n  onResultLoaded?: (\n    messages?: Array<SendBird.UserMessage | SendBird.FileMessage | SendBird.AdminMessage>,\n    error?: SendbirdUIKit.SendbirdError,\n  ) => void;\n  retryCount: number;\n}\ninterface ToolProps {\n  sdk: SendbirdUIKit.Sdk;\n  logger: SendbirdUIKit.Logger;\n  messageSearchDispathcer: ({ type: string, payload: any }) => void;\n}\n\nfunction useGetSearchedMessages(\n  { currentChannel, channelUrl, requestString, messageSearchQuery, onResultLoaded, retryCount }: MainProps,\n  { sdk, logger, messageSearchDispathcer }: ToolProps,\n): void {\n  useEffect(() => {\n    messageSearchDispathcer({\n      type: messageActionTypes.START_MESSAGE_SEARCH,\n      payload: null,\n    });\n    if (sdk && channelUrl && sdk.createMessageSearchQuery && currentChannel) {\n      if (requestString) {\n        const inputSearchMessageQueryObject = {\n          ...messageSearchQuery,\n          order: 'ts' as const,\n          channelUrl,\n          messageTimestampFrom: currentChannel.invitedAt,\n        };\n        const createdQuery = sdk.createMessageSearchQuery(requestString, inputSearchMessageQueryObject);\n        createdQuery.next((messages, error) => {\n          if (!error) {\n            logger.info('MessageSearch | useGetSearchedMessages: succeeded getting messages', messages);\n            messageSearchDispathcer({\n              type: messageActionTypes.GET_SEARCHED_MESSAGES,\n              payload: {\n                messages,\n                createdQuery,\n              },\n            });\n            if (onResultLoaded && typeof onResultLoaded === 'function') {\n              onResultLoaded(messages, null);\n            }\n          } else {\n            logger.warning('MessageSearch | useGetSearchedMessages: getting failed', error);\n            messageSearchDispathcer({\n              type: messageActionTypes.SET_QUERY_INVALID,\n              payload: null,\n            });\n            if (onResultLoaded && typeof onResultLoaded === 'function') {\n              onResultLoaded(null, error);\n            }\n          }\n        });\n        messageSearchDispathcer({\n          type: messageActionTypes.START_GETTING_SEARCHED_MESSAGES,\n          payload: createdQuery,\n        });\n      } else {\n        logger.info('MessageSearch | useGetSeasrchedMessages: search string is empty');\n      }\n    }\n  }, [channelUrl, messageSearchQuery, requestString, currentChannel, retryCount]);\n}\n\nexport default useGetSearchedMessages;\n","import { useCallback } from 'react';\nimport * as messageActionTypes from '../dux/actionTypes';\nimport SendbirdUIKit from '../../../index';\n\ninterface MainProps {\n  currentMessageSearchQuery: SendBird.MessageSearchQuery;\n  hasMoreResult: boolean;\n  onResultLoaded?: (\n    messages?: Array<SendBird.UserMessage | SendBird.FileMessage | SendBird.AdminMessage>,\n    error?: SendbirdUIKit.SendbirdError,\n  ) => void;\n}\ninterface ToolProps {\n  logger: SendbirdUIKit.Logger;\n  messageSearchDispathcer: ({ type: string, payload: any }) => void;\n}\ntype CallbackReturn = (\n  callback: (\n    messages: Array<SendBird.UserMessage | SendBird.FileMessage | SendBird.AdminMessage>,\n    /* eslint-disable @typescript-eslint/no-explicit-any*/\n    error: any,\n  ) => void\n) => void;\n\nfunction useScrollCallback(\n  { currentMessageSearchQuery, hasMoreResult, onResultLoaded }: MainProps,\n  { logger, messageSearchDispathcer }: ToolProps,\n): CallbackReturn {\n  return useCallback((cb) => {\n    if (!hasMoreResult) {\n      logger.warning('MessageSearch | useScrollCallback: no more searched results', hasMoreResult);\n    }\n    if (currentMessageSearchQuery && currentMessageSearchQuery.hasNext) {\n      currentMessageSearchQuery.next((messages, error) => {\n        if (!error) {\n          logger.info('MessageSearch | useScrollCallback: succeeded getting searched messages', messages);\n          messageSearchDispathcer({\n            type: messageActionTypes.GET_NEXT_SEARCHED_MESSAGES,\n            payload: messages,\n          });\n          cb(messages, null);\n          if (onResultLoaded && typeof onResultLoaded === 'function') {\n            onResultLoaded(messages, null);\n          }\n        } else {\n          logger.warning('MessageSearch | useScrollCallback: failed getting searched messages', error);\n          cb(null, error);\n          if (onResultLoaded && typeof onResultLoaded === 'function') {\n            onResultLoaded(null, error);\n          }\n        }\n      });\n    } else {\n      logger.warning('MessageSearch | useScrollCallback: no currentMessageSearchQuery');\n    }\n  }, [currentMessageSearchQuery, hasMoreResult]);\n}\n\nexport default useScrollCallback;\n","import format from 'date-fns/format';\nimport formatRelative from 'date-fns/formatRelative';\nimport isToday from 'date-fns/isToday';\nimport isYesterday from 'date-fns/isYesterday';\n\n// getCreatedAt\nexport default (createdAt: number, locale: Locale): string => {\n  const optionalParam = locale ? { locale } : null;\n  if (!createdAt) {\n    return '';\n  }\n  if (isToday(createdAt)) {\n    return format(createdAt, 'p', optionalParam);\n  }\n  if (isYesterday(createdAt)) {\n    return formatRelative(createdAt, new Date(), optionalParam);\n  }\n  return format(createdAt, 'MMM dd', optionalParam);\n};\n","import React, { useContext } from 'react';\nimport './index.scss';\nimport getCreatedAt from './getCreatedAt';\n\nimport Avatar from '../Avatar';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\n\ninterface Props {\n  className?: string | Array<string>;\n  message: SendbirdUIKit.ClientUserMessage;\n  selected?: boolean;\n  onClick?: (message: SendbirdUIKit.ClientMessage) => void;\n}\n\nexport default function MessageSearchItem({\n  className,\n  message,\n  selected,\n  onClick,\n}: Props): JSX.Element {\n  const { createdAt } = message;\n  const messageText = message.message;\n  const sender = message.sender || message._sender;\n  const { profileUrl, nickname } = sender;\n  const { stringSet, dateLocale } = useContext(LocalizationContext);\n\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-message-search-item',\n        selected ? 'sendbird-message-search-item--selected' : '',\n      ].join(' ')}\n      onClick={(e) => {\n        e.stopPropagation();\n        onClick(message);\n      }}\n    >\n      <div className=\"sendbird-message-search-item__left\">\n        <Avatar\n          className=\"sendbird-message-search-item__left__sender-avatar\"\n          src={profileUrl}\n          alt=\"profile image\"\n          width=\"56px\"\n          height=\"56px\"\n        />\n      </div>\n      <div className=\"sendbird-message-search-item__right\">\n        <Label\n          className=\"sendbird-message-search-item__right__sender-name\"\n          type={LabelTypography.SUBTITLE_2}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {nickname || stringSet.NO_NAME}\n        </Label>\n        <Label\n          className=\"sendbird-message-search-item__right__message-text\"\n          type={LabelTypography.BODY_2}\n          color={LabelColors.ONBACKGROUND_3}\n        >\n          {messageText}\n        </Label>\n        <Label\n          className=\"sendbird-message-search-item__right__message-created-at\"\n          type={LabelTypography.CAPTION_3}\n          color={LabelColors.ONBACKGROUND_2}\n        >\n          {getCreatedAt(createdAt, dateLocale)}\n        </Label>\n      </div>\n      <div className=\"sendbird-message-search-item__right-footer\" />\n    </div>\n  );\n}\n","import format from 'date-fns/format';\nimport formatRelative from 'date-fns/formatRelative';\nimport isToday from 'date-fns/isToday';\nimport isYesterday from 'date-fns/isYesterday';\nimport { IconTypes } from '../Icon';\n\nexport function getCreatedAt(createdAt: number, locale: Locale): string {\n  const optionalParam = locale ? { locale } : null;\n  if (!createdAt) {\n    return '';\n  }\n  if (isToday(createdAt)) {\n    return format(createdAt, 'p', optionalParam);\n  }\n  if (isYesterday(createdAt)) {\n    return formatRelative(createdAt, new Date(), optionalParam);\n  }\n  return format(createdAt, 'MMM dd', optionalParam);\n}\n\nexport function getIconOfFileType(message: SendbirdUIKit.ClientFileMessage): string {\n  const { url } = message;\n  const fileMessageUrl = url;\n  const fileExtension = (fileMessageUrl.match(/\\.([^.]*?)(?=\\?|#|$)/))[1];\n\n  if (/(jpg|jpeg|png)$/i.test(fileExtension)) {\n    return IconTypes.PHOTO;\n  } else if (/mp4$/i.test(fileExtension)) {\n    return IconTypes.PLAY;\n  } else if (/mp3/i.test(fileExtension)) {\n    return IconTypes.FILE_AUDIO;\n  } else if (/gif/i.test(fileExtension)) {\n    return IconTypes.GIF;\n  } else {\n    return IconTypes.FILE_DOCUMENT;\n  }\n}\n\nexport function truncate(fullText: string, textLimit: number): string {\n  if (fullText.length <= textLimit) return fullText;\n  const separator = '...';\n  const sepLen = separator.length;\n  const charsToShow = textLimit - sepLen;\n  const frontChars = Math.ceil(charsToShow / 2);\n  const backChars = Math.floor(charsToShow / 2);\n  return fullText.substr(0, frontChars) + separator + fullText.substr(fullText.length - backChars);\n}\n","import React, { ReactElement, useContext } from 'react';\nimport './index.scss';\n\nimport Avatar from '../Avatar';\nimport Icon, { IconColors } from '../Icon';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport { getCreatedAt, getIconOfFileType, truncate } from './utils';\n\ninterface Props {\n  className?: string | Array<string>;\n  message: SendbirdUIKit.ClientFileMessage;\n  selected?: boolean;\n  onClick?: (message: SendbirdUIKit.ClientFileMessage) => void;\n}\n\nexport default function MessageSearchFileItem(props: Props): ReactElement {\n  const {\n    className,\n    message,\n    selected,\n    onClick,\n  } = props;\n  const { createdAt, url, name } = message;\n  const fileMessageUrl = url;\n  const sender = message.sender || message._sender;\n  const { profileUrl, nickname } = sender;\n  const { stringSet, dateLocale } = useContext(LocalizationContext);\n\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-message-search-file-item',\n        selected ? 'sendbird-message-search-file-item--selected' : '',\n      ].join(' ')}\n      onClick={(e) => {\n        e.stopPropagation();\n        onClick(message);\n      }}\n    >\n      <div className=\"sendbird-message-search-file-item__left\">\n        <Avatar\n          className=\"sendbird-message-search-file-item__left__sender-avatar\"\n          src={profileUrl}\n          alt=\"profile image\"\n          width=\"56px\"\n          height=\"56px\"\n        />\n      </div>\n      <div className=\"sendbird-message-search-file-item__right\">\n        <Label\n          className=\"sendbird-message-search-file-item__right__sender-name\"\n          type={LabelTypography.SUBTITLE_2}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {nickname || stringSet.NO_NAME}\n        </Label>\n        <div className=\"sendbird-message-search-file-item__right__content\">\n          <div className=\"sendbird-message-search-file-item__right__content__type-icon\">\n            <Icon\n              type={getIconOfFileType(message)}\n              fillColor={IconColors.PRIMARY}\n              width=\"18px\"\n              height=\"18px\"\n            />\n          </div>\n          <Label\n            className=\"sendbird-message-search-file-item__right__content__url\"\n            type={LabelTypography.BODY_2}\n            color={LabelColors.ONBACKGROUND_1}\n          >\n            {truncate(name || fileMessageUrl, 28)}\n          </Label>\n        </div>\n      </div>\n      <Label\n        className=\"sendbird-message-search-file-item__message-created-at\"\n        type={LabelTypography.CAPTION_3}\n        color={LabelColors.ONBACKGROUND_2}\n      >\n        {getCreatedAt(createdAt, dateLocale)}\n      </Label>\n      <div className=\"sendbird-message-search-file-item__right-footer\" />\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport * as messageActionTypes from '../dux/actionTypes';\n\ninterface DynamicParams {\n  searchString: string;\n}\n\ninterface StaticParams {\n  messageSearchDispathcer: ({ type: string, payload: any }) => void;\n}\n\nconst DEBOUNCING_TIME = 500;\n\nfunction useSearchStringEffect(\n  { searchString }: DynamicParams,\n  { messageSearchDispathcer }: StaticParams,\n): string {\n  const [requestString, setRequestString] = useState('');\n  const [debouncingTimer, setDebouncingTimer] = useState(null);\n  useEffect(() => {\n    clearTimeout(debouncingTimer);\n    if (searchString) {\n      setDebouncingTimer(\n        setTimeout(() => {\n          setRequestString(searchString);\n        }, DEBOUNCING_TIME)\n      );\n    } else {\n      setRequestString('');\n      messageSearchDispathcer({\n        type: messageActionTypes.RESET_SEARCH_STRING,\n        payload: '',\n      });\n    }\n  }, [searchString]);\n  return requestString;\n}\n\nexport default useSearchStringEffect;\n","import React, { useReducer, useRef, useContext, useState } from 'react';\nimport './index.scss';\n\nimport widthSendbirdContext from '../../lib/SendbirdSdkContext';\nimport messageSearchReducer from './dux/reducers';\nimport messageSearchInitialState from './dux/initialState';\n\nimport useSetChannel from './hooks/useSetChannel';\nimport useGetSearchMessages from './hooks/useGetSearchedMessages';\nimport useScrollCallback from './hooks/useScrollCallback';\n\nimport MessageSearchItem from '../../ui/MessageSearchItem';\nimport PlaceHolder, { PlaceHolderTypes } from '../../ui/PlaceHolder';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport MessageSearchFileItem from '../../ui/MessageSearchFileItem';\n\nimport SendbirdUIKit from '../../index';\nimport useSearchStringEffect from './hooks/useSearchStringEffect';\n\nconst COMPONENT_CLASS_NAME = 'sendbird-message-search';\n\ninterface Props extends SendbirdUIKit.MessageSearchProps {\n  // sendbird internal props\n  stores: {\n    sdkStore?: SendbirdUIKit.SdkStore,\n    userStore?: SendbirdUIKit.UserStore,\n  };\n  config: {\n    userId: string,\n    isOnline: boolean,\n    logger?: SendbirdUIKit.Logger,\n    theme?: string,\n    /* eslint-disable @typescript-eslint/no-explicit-any*/\n    pubSub: any,\n    disableUserProfile?: boolean,\n    renderUserProfile?(): JSX.Element,\n    imageCompression?: {\n      compressionRate?: number,\n      resizingWidth?: number | string,\n      resizingHeight?: number | string,\n    },\n  };\n}\n\nfunction MessageSearch(props: Props): JSX.Element {\n  const {\n    // sendbird internal props\n    stores,\n    config,\n    // message search props\n    channelUrl,\n    searchString,\n    messageSearchQuery,\n    renderSearchItem,\n    onResultLoaded,\n    onResultClick,\n  } = props;\n\n  // hook variables\n  const { stringSet } = useContext(LocalizationContext);\n  const [retryCount, setRetryCount] = useState(0); // this is a trigger flag for activating useGetSearchMessages\n  const [selectedMessageId, setSelectedMessageId] = useState(0);\n  const [messageSearchStore, messageSearchDispathcer] = useReducer(messageSearchReducer, messageSearchInitialState);\n  const {\n    allMessages,\n    loading,\n    isInvalid,\n    currentChannel,\n    currentMessageSearchQuery,\n    hasMoreResult,\n  } = messageSearchStore;\n\n  const getChannelName = () => {\n    if (currentChannel && currentChannel.name && currentChannel.name !== 'Group Channel') {\n      return currentChannel.name;\n    }\n    if (currentChannel && (currentChannel.name === 'Group Channel' || !currentChannel.name)) {\n      return currentChannel.members.map((member) => member.nickname || stringSet.NO_NAME).join(', ');\n    }\n    return stringSet.NO_TITLE;\n  };\n\n  // const\n  const { sdkStore } = stores;\n  const { logger } = config;\n  const { sdk } = sdkStore;\n  const sdkInit = sdkStore.initialized;\n  const scrollRef = useRef(null);\n  const handleOnScroll = (e) => {\n    const scrollElement = e.target;\n    const {\n      scrollTop,\n      scrollHeight,\n      clientHeight,\n    } = scrollElement;\n\n    if (!hasMoreResult) {\n      return;\n    }\n    if (scrollTop + clientHeight >= scrollHeight) {\n      onScroll(() => {\n        // after load more searched messages\n      });\n    }\n  };\n\n  useSetChannel(\n    { channelUrl, sdkInit },\n    { sdk, logger, messageSearchDispathcer },\n  );\n\n  const requestString = useSearchStringEffect({ searchString }, { messageSearchDispathcer });\n\n  useGetSearchMessages(\n    { currentChannel, channelUrl, requestString, messageSearchQuery, onResultLoaded, retryCount },\n    { sdk, logger, messageSearchDispathcer },\n  );\n\n  const onScroll = useScrollCallback(\n    { currentMessageSearchQuery, hasMoreResult, onResultLoaded },\n    { logger, messageSearchDispathcer },\n  );\n\n  const handleRetryToConnect = () => {\n    setRetryCount(retryCount + 1);\n  };\n\n  if (isInvalid && searchString && requestString) {\n    return (\n      <div className={COMPONENT_CLASS_NAME}>\n        <PlaceHolder\n          type={PlaceHolderTypes.WRONG}\n          retryToConnect={handleRetryToConnect}\n        />\n      </div>\n    );\n  }\n\n  if (loading && searchString && requestString) {\n    return (\n      <div className={COMPONENT_CLASS_NAME}>\n        <PlaceHolder type={PlaceHolderTypes.SEARCHING} />\n      </div>\n    );\n  }\n\n  if (!searchString) {\n    return (\n      <div className={COMPONENT_CLASS_NAME}>\n        <PlaceHolder\n          type={PlaceHolderTypes.SEARCH_IN}\n          searchInString={getChannelName()}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={COMPONENT_CLASS_NAME}\n      onScroll={handleOnScroll}\n      ref={scrollRef}\n    >\n      {\n        (allMessages.length > 0)\n          ? (\n            allMessages.map((message) => {\n              if (renderSearchItem) {\n                return renderSearchItem({ message, onResultClick });\n              }\n              if (message.messageType === 'file') {\n                return (\n                  <MessageSearchFileItem\n                    className={`${COMPONENT_CLASS_NAME}__message-search-item`}\n                    message={message}\n                    key={message.messageId}\n                    selected={(selectedMessageId === message.messageId)}\n                    onClick={() => {\n                      onResultClick(message);\n                      setSelectedMessageId(message.messageId);\n                    }}\n                  />\n                );\n              }\n              return (\n                <MessageSearchItem\n                  className={`${COMPONENT_CLASS_NAME}__message-search-item`}\n                  message={message}\n                  key={message.messageId}\n                  selected={(selectedMessageId === message.messageId)}\n                  onClick={() => {\n                    onResultClick(message);\n                    setSelectedMessageId(message.messageId);\n                  }}\n                />\n              );\n            })\n          )\n          : (\n            <PlaceHolder type={PlaceHolderTypes.NO_RESULTS} />\n          )\n      }\n    </div>\n  );\n}\n\nexport default widthSendbirdContext(MessageSearch);\n"]},"metadata":{},"sourceType":"module"}